
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YutFurry - YouTube клієнт</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Roboto', Arial, sans-serif;
            background-color: #0f0f0f;
            color: white;
            overflow-x: hidden;
        }
        
        .sidebar {
            transition: transform 0.3s ease;
        }
        
        .video-card {
            transition: transform 0.2s ease;
            cursor: pointer;
        }
        
        .video-card:hover {
            transform: scale(1.03);
        }
        
        .category-btn.active {
            background-color: #272727;
            color: white;
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                position: fixed;
                z-index: 50;
                height: 100vh;
                overflow-y: auto;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 40;
            }
            
            .overlay.active {
                display: block;
            }
            
            .search-container {
                display: none;
            }
            
            .mobile-search {
                display: block;
            }
        }
        
        .mobile-search {
            display: none;
        }
        
        .search-active .search-container {
            display: flex;
        }
        
        .search-active .logo-container {
            display: none;
        }
        
        .loading {
            display: none;
        }
        
        .loading.active {
            display: block;
        }
    </style>
</head>
<body class="bg-[#0f0f0f] text-white">
    <!-- Header -->
    <header class="flex items-center justify-between p-4 bg-[#0f0f0f] sticky top-0 z-30 border-b border-[#272727]">
        <div class="flex items-center space-x-4">
            <!-- Mobile menu button -->
            <button id="menuBtn" class="md:hidden p-2 rounded-full hover:bg-[#272727]">
                <i class="fas fa-bars"></i>
            </button>
            
            <!-- Logo -->
            <div class="logo-container flex items-center space-x-2">
                <div class="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center">
                    <span class="font-bold">YF</span>
                </div>
                <span class="text-xl font-bold hidden sm:block">YutFurry</span>
            </div>
        </div>
        
        <!-- Search Bar -->
        <div class="search-container flex-1 max-w-2xl mx-4">
            <div class="flex">
                <input type="text" id="searchInput" placeholder="Пошук" 
                    class="flex-1 bg-[#121212] border border-[#303030] rounded-l-full px-4 py-2 focus:outline-none focus:border-blue-500 text-white">
                <button id="searchBtn" class="bg-[#303030] border border-[#303030] border-l-0 rounded-r-full px-6 hover:bg-[#404040]">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile search button -->
        <button id="mobileSearchBtn" class="mobile-search md:hidden p-2 rounded-full hover:bg-[#272727]">
            <i class="fas fa-search"></i>
        </button>
        
        <!-- User actions -->
        <div class="flex items-center space-x-4">
            <button class="p-2 rounded-full hover:bg-[#272727]">
                <i class="fas fa-video"></i>
            </button>
            <button class="p-2 rounded-full hover:bg-[#272727]">
                <i class="fas fa-bell"></i>
            </button>
            <div class="w-8 h-8 bg-[#3ea6ff] rounded-full flex items-center justify-center">
                <span class="font-bold text-black">A</span>
            </div>
        </div>
    </header>

    <div class="flex">
        <!-- Sidebar -->
        <aside class="sidebar w-64 bg-[#0f0f0f] h-[calc(100vh-56px)] overflow-y-auto fixed md:static">
            <nav class="p-2">
                <!-- Main navigation -->
                <div class="mb-6">
                    <a href="#" class="flex items-center space-x-4 p-2 rounded-lg hover:bg-[#272727]">
                        <i class="fas fa-home w-6 text-center"></i>
                        <span>Головна</span>
                    </a>
                    <a href="#" class="flex items-center space-x-4 p-2 rounded-lg hover:bg-[#272727]">
                        <i class="fas fa-fire w-6 text-center"></i>
                        <span>Тренди</span>
                    </a>
                    <a href="#" class="flex items-center space-x-4 p-2 rounded-lg hover:bg-[#272727]">
                        <i class="fas fa-play-circle w-6 text-center"></i>
                        <span>Підписки</span>
                    </a>
                </div>
                
                <!-- Categories -->
                <div class="mb-6">
                    <h3 class="px-4 py-2 text-sm font-medium text-gray-400">НАВІГАЦІЯ</h3>
                    <a href="#" class="flex items-center space-x-4 p-2 rounded-lg hover:bg-[#272727]">
                        <i class="fas fa-music w-6 text-center"></i>
                        <span>Музика</span>
                    </a>
                    <a href="#" class="flex items-center space-x-4 p-2 rounded-lg hover:bg-[#272727]">
                        <i class="fas fa-gamepad w-6 text-center"></i>
                        <span>Ігри</span>
                    </a>
                    <a href="#" class="flex items-center space-x-4 p-2 rounded-lg hover:bg-[#272727]">
                        <i class="fas fa-basketball-ball w-6 text-center"></i>
                        <span>Спорт</span>
                    </a>
                </div>
                
                <!-- About Creator Section -->
                <div class="mb-6 border-t border-[#272727] pt-4">
                    <h3 class="px-4 py-2 text-sm font-medium text-gray-400">ПРО ТВОРЦЯ</h3>
                    <div class="p-4 bg-[#1a1a1a] rounded-lg mx-2">
                        <div class="flex items-center space-x-3 mb-3">
                            <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                                <span class="font-bold">АП</span>
                            </div>
                            <div>
                                <h4 class="font-medium">Артем Процко Андрійович</h4>
                                <p class="text-xs text-gray-400">Головний розробник</p>
                            </div>
                        </div>
                        <p class="text-sm text-gray-300 mb-3">
                            Full-stack розробник з 5-річним досвідом. Спеціалізуюсь на створенні сучасних веб-додатків з акцентом на UX/UI дизайн та високу продуктивність.
                        </p>
                        <div class="space-y-2 text-xs text-gray-400">
                            <div class="flex items-center space-x-2">
                                <i class="fas fa-graduation-cap"></i>
                                <span>Магістр комп'ютерних наук</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>Київ, Україна</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <i class="fas fa-code"></i>
                                <span>React, Node.js, TypeScript</span>
                            </div>
                        </div>
                        <div class="flex space-x-2 mt-4">
                            <button class="flex-1 bg-[#3ea6ff] text-black py-1 px-3 rounded-full text-sm font-medium hover:bg-[#65b8ff]">
                                Підписатися
                            </button>
                            <button class="w-8 h-8 rounded-full bg-[#272727] flex items-center justify-center hover:bg-[#3a3a3a]">
                                <i class="fas fa-ellipsis-h text-sm"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </nav>
        </aside>

        <!-- Overlay for mobile sidebar -->
        <div id="overlay" class="overlay"></div>

        <!-- Main content -->
        <main class="flex-1 p-4 md:ml-0">
            <!-- Loading indicator -->
            <div id="loading" class="loading fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50">
                <div class="bg-[#1a1a1a] p-6 rounded-lg shadow-lg">
                    <div class="flex items-center space-x-3">
                        <div class="w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
                        <span>Завантаження...</span>
                    </div>
                </div>
            </div>

            <!-- Categories -->
            <div class="flex space-x-2 mb-6 overflow-x-auto pb-2">
                <button class="category-btn active bg-[#272727] text-white px-3 py-1 rounded-full whitespace-nowrap hover:bg-[#3a3a3a] transition-colors" data-category="all">
                    Усі
                </button>
                <button class="category-btn bg-[#272727] text-white px-3 py-1 rounded-full whitespace-nowrap hover:bg-[#3a3a3a] transition-colors" data-category="popular">
                    Популярне
                </button>
                <button class="category-btn bg-[#272727] text-white px-3 py-1 rounded-full whitespace-nowrap hover:bg-[#3a3a3a] transition-colors" data-category="music">
                    Музика
                </button>
                <button class="category-btn bg-[#272727] text-white px-3 py-1 rounded-full whitespace-nowrap hover:bg-[#3a3a3a] transition-colors" data-category="games">
                    Ігри
                </button>
                <button class="category-btn bg-[#272727] text-white px-3 py-1 rounded-full whitespace-nowrap hover:bg-[#3a3a3a] transition-colors" data-category="movies">
                    Фільми
                </button>
                <button class="category-btn bg-[#272727] text-white px-3 py-1 rounded-full whitespace-nowrap hover:bg-[#3a3a3a] transition-colors" data-category="live">
                    Живі трансляції
                </button>
                <button class="category-btn bg-[#272727] text-white px-3 py-1 rounded-full whitespace-nowrap hover:bg-[#3a3a3a] transition-colors" data-category="learning">
                    Навчання
                </button>
            </div>

            <!-- Videos grid -->
            <div id="videosGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                <!-- Videos will be loaded here -->
                <div class="col-span-full text-center py-8 text-gray-400">
                    Оберіть категорію або введіть пошуковий запит
                </div>
            </div>
        </main>
    </div>

    <script>
        // YouTube API configuration
        const API_KEY = 'AIzaSyBVqXcayVNDN63l4WpH2HOrTfAqzh3DTXo';
        let currentCategory = 'all';
        let currentSearch = '';

        // Mobile menu functionality
        const menuBtn = document.getElementById('menuBtn');
        const sidebar = document.querySelector('.sidebar');
        const overlay = document.getElementById('overlay');
        const mobileSearchBtn = document.getElementById('mobileSearchBtn');
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const categoryBtns = document.querySelectorAll('.category-btn');
        const videosGrid = document.getElementById('videosGrid');
        const loading = document.getElementById('loading');

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing YutFurry...');
            setupEventListeners();
            // Load initial videos
            loadVideos('all');
        });

        function setupEventListeners() {
            console.log('Setting up event listeners...');
            
            // Mobile menu
            menuBtn.addEventListener('click', () => {
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
            });
            
            overlay.addEventListener('click', () => {
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
            });

            // Mobile search
            mobileSearchBtn.addEventListener('click', () => {
                document.body.classList.add('search-active');
                searchInput.focus();
            });

            // Search functionality
            searchBtn.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });

            // Category buttons - FIXED: Proper event delegation
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    console.log('Category clicked:', this.getAttribute('data-category'));
                    const category = this.getAttribute('data-category');
                    
                    // Update active state
                    categoryBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    currentCategory = category;
                    loadVideos(category);
                });
            });

            // Close mobile search when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.search-container') && !e.target.closest('#mobileSearchBtn')) {
                    document.body.classList.remove('search-active');
                }
            });
        }

        async function loadVideos(category) {
            console.log('Loading videos for category:', category);
            try {
                loading.classList.add('active');
                videosGrid.innerHTML = '';
                
                let searchQuery = '';
                switch(category) {
                    case 'music':
                        searchQuery = 'українська музика 2024';
                        break;
                    case 'games':
                        searchQuery = 'геймінг україна';
                        break;
                    case 'popular':
                        searchQuery = 'популярні відео україна';
                        break;
                    case 'movies':
                        searchQuery = 'фільми україна';
                        break;
                    case 'live':
                        searchQuery = 'живі трансляції україна';
                        break;
                    case 'learning':
                        searchQuery = 'навчання програмування';
                        break;
                    default:
                        searchQuery = 'україна';
                }

                const response = await fetch(
                    `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=12&q=${encodeURIComponent(searchQuery)}&type=video&key=${API_KEY}`
                );
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('YouTube API response:', data);
                displayVideos(data.items);
            } catch (error) {
                console.error('Error loading videos:', error);
                videosGrid.innerHTML = `
                    <div class="col-span-full text-center py-8 text-red-400">
                        Помилка завантаження відео: ${error.message}
                        <br><small>Перевірте API ключ та підключення до інтернету</small>
                    </div>
                `;
            } finally {
                loading.classList.remove('active');
            }
        }

        async function performSearch() {
            const query = searchInput.value.trim();
            if (!query) return;

            console.log('Performing search:', query);
            currentSearch = query;
            try {
                loading.classList.add('active');
                videosGrid.innerHTML = '';
                
                const response = await fetch(
                    `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=12&q=${encodeURIComponent(query)}&type=video&key=${API_KEY}`
                );
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('Search results:', data);
                displayVideos(data.items);
                
                // Reset search on mobile
                document.body.classList.remove('search-active');
            } catch (error) {
                console.error('Search error:', error);
                videosGrid.innerHTML = `
                    <div class="col-span-full text-center py-8 text-red-400">
                        Помилка пошуку: ${error.message}
                        <br><small>Перевірте API ключ та підключення до інтернету</small>
                    </div>
                `;
            } finally {
                loading.classList.remove('active');
            }
        }

        function displayVideos(videos) {
            if (!videos || videos.length === 0) {
                videosGrid.innerHTML = '<div class="col-span-full text-center py-8">Відео не знайдено</div>';
                return;
            }

            videosGrid.innerHTML = videos.map(video => {
                const thumbnail = video.snippet.thumbnails.medium ? video.snippet.thumbnails.medium.url : 'https://via.placeholder.com/320x180';
                const title = video.snippet.title || 'Без назви';
                const channel = video.snippet.channelTitle || 'Невідомий канал';
                const videoId = video.id.videoId;
                
                return `
                <div class="video-card bg-transparent rounded-lg overflow-hidden" onclick="openVideo('${videoId}')">
                    <div class="relative">
                        <img src="${thumbnail}" 
                             alt="${title}" 
                             class="w-full h-40 object-cover rounded-xl">
                        <span class="absolute bottom-2 right-2 bg-black bg-opacity-80 text-xs px-1 rounded">10:25</span>
                    </div>
                    <div class="flex mt-3">
                        <div class="w-9 h-9 bg-gray-500 rounded-full mr-3 flex-shrink-0"></div>
                        <div class="flex-1">
                            <h3 class="font-medium text-sm mb-1 line-clamp-2">${title}</h3>
                            <p class="text-gray-400 text-xs">${channel}</p>
                            <p class="text-gray-400 text-xs">125 тис. переглядів • 2 дні тому</p>
                        </div>
                    </div>
                </div>
                `;
            }).join('');
        }

        // Function to open video in new tab
        function openVideo(videoId) {
            window.open(`https://www.youtube.com/watch?v=${videoId}`, '_blank');
        }

        // Test function to check if API key works
        async function testAPI() {
            try {
                const response = await fetch(
                    `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=1&q=test&type=video&key=${API_KEY}`
                );
                if (response.ok) {
                    console.log('API ключ працює коректно');
                    return true;
                } else {
                    console.error('API ключ не працює:', response.status);
                    return false;
                }
            } catch (error) {
                console.error('Помилка перевірки API:', error);
                return false;
            }
        }

        // Make functions globally available
        window.openVideo = openVideo;
        window.performSearch = performSearch;
    </script>
</body>
</html>
