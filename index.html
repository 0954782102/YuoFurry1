<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>YouFurry ‚Äî –≤—ñ–¥–µ–æ –¥–ª—è –¥—É—à—ñ</title>
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%23ff6b6b'/%3E%3Ctext x='50' y='57' font-size='36' text-anchor='middle' fill='white' font-family='Arial'%3EYF%3C/text%3E%3C/svg%3E">
<style>
  /* --- Reset + base --- */
  :root{
    --bg:#0f0f11; --card:#141416; --muted:#9aa0a6; --accent:#ff5252; --glass: rgba(255,255,255,0.03);
    --radius:14px; --container-w:1100px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter, Roboto, Arial, sans-serif;
    background: linear-gradient(180deg,#07070a 0%, #0e0e11 100%);
    color:#e6eef3;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    display:flex;flex-direction:column;align-items:center;
  }
  .app{
    width:100%; max-width:var(--container-w); padding:18px; display:flex; flex-direction:column; gap:18px;
  }

  /* --- Top header and "button bar" moved to top --- */
  header{
    display:flex; align-items:center; gap:14px; justify-content:space-between;
  }
  .brand{
    display:flex; gap:12px; align-items:center;
  }
  .logo{
    width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,#ff8a8a,#ff5252);display:flex;align-items:center;justify-content:center;font-weight:700;
    box-shadow:0 6px 20px rgba(255,82,82,0.12);
  }
  .brand h1{margin:0;font-size:18px}
  .top-buttons{
    display:flex; gap:8px; align-items:center;
  }
  .btn{
    background:var(--glass); border:1px solid rgba(255,255,255,0.04); padding:10px 12px; border-radius:12px; cursor:pointer;
    color:var(--muted); font-weight:600; font-size:14px;
  }
  .btn.primary{ background:linear-gradient(90deg,var(--accent),#ff8a8a); color:white; border:none; box-shadow:0 8px 24px rgba(255,82,82,0.14); }

  /* --- Main layout --- */
  .main{
    display:grid; grid-template-columns: 320px 1fr; gap:18px; width:100%;
  }
  .sidebar{
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:var(--radius); padding:14px; min-height:380px;
  }
  .card{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:16px; padding:12px;
  }

  /* --- Search at bottom --- */
  .search-bar{
    position:fixed; left:50%; transform:translateX(-50%); bottom:20px; width:calc(100% - 40px); max-width:840px;
    display:flex; gap:12px; align-items:center; padding:12px; border-radius:28px;
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02)); box-shadow:0 10px 30px rgba(0,0,0,0.6);
    backdrop-filter: blur(6px);
  }
  .search-bar input{
    background:transparent; border:0; outline:none; color:#eaf2f6; font-size:16px; flex:1;
  }
  .search-bar .search-btn{padding:10px 16px; border-radius:12px; border:none; cursor:pointer;}
  .search-bar .search-btn.primary{ background:var(--accent); color:white; }

  /* --- Video grid --- */
  .videos{ display:grid; grid-template-columns: repeat(auto-fill,minmax(260px,1fr)); gap:16px; align-items:start;}
  .video{
    border-radius:12px; overflow:hidden; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
    cursor:pointer; transition:transform .15s ease, box-shadow .15s ease;
  }
  .video:hover{ transform:translateY(-6px); box-shadow:0 20px 40px rgba(2,6,23,0.6); }
  .thumb{ width:100%; aspect-ratio:16/9; object-fit:cover; display:block; }
  .meta{ padding:10px; }
  .meta h3{ margin:0 0 6px 0; font-size:15px; color:#eaf2f6; }
  .meta p{ margin:0; font-size:13px; color:var(--muted); }

  /* --- Player modal --- */
  .player-modal{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(2,6,23,0.6); z-index:1200;
  }
  .player-modal.show{ display:flex; }
  .player-card{ width:90%; max-width:1100px; background:var(--card); border-radius:16px; padding:12px; }
  .player-card iframe{ width:100%; height:60vh; border:0; border-radius:8px; }

  /* --- Modal styles (consent/warning/register) --- */
  .modal{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(2,6,23,0.6); z-index:1300;
  }
  .modal.show{ display:flex; }
  .modal .dialog{
    width:92%; max-width:920px; max-height:88vh; overflow:auto; background:linear-gradient(180deg,#0b0b0d,#101014); border-radius:20px; padding:22px; box-shadow:0 30px 80px rgba(0,0,0,0.7);
  }
  .modal h2{ margin:0 0 12px 0; font-size:20px; color:#fff}
  .modal p{ color:var(--muted); line-height:1.5; white-space:pre-wrap; }

  .modal .actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:16px; }

  /* --- small helpers --- */
  .muted{ color:var(--muted); font-size:13px }
  .flex{ display:flex; gap:10px; align-items:center }
  .form-input{ background:transparent; border:1px solid rgba(255,255,255,0.04); padding:10px; border-radius:10px; color:#eaf2f6; width:100% }
  footer{ padding:14px; color:var(--muted); font-size:13px; text-align:center }
  @media(max-width:880px){
    .main{ grid-template-columns: 1fr; }
    .sidebar{ order:2; }
  }
</style>
</head>
<body>
<div class="app" id="app">
  <header>
    <div class="brand">
      <div class="logo">YF</div>
      <div>
        <h1>YouFurry</h1>
        <div class="muted">–í—ñ–¥–µ–æ–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç—É</div>
      </div>
    </div>

    <div class="top-buttons">
      <button class="btn" id="homeBtn">–ì–æ–ª–æ–≤–Ω–∞</button>
      <button class="btn" id="subscriptionsBtn">–ü—ñ–¥–ø–∏—Å–∫–∏</button>
      <button class="btn" id="libraryBtn">–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞</button>
      <button class="btn primary" id="uploadBtn">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button>
      <button class="btn" id="authBtn">–£–≤—ñ–π—Ç–∏ / –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</button>
    </div>
  </header>

  <main class="main">
    <aside class="sidebar card">
      <h3>–ù–∞–≤—ñ–≥–∞—Ü—ñ—è</h3>
      <div style="display:flex;flex-direction:column;gap:8px;margin-top:10px">
        <button class="btn">–î–∏–≤–∏—Ç–∏—Å—è –ø—ñ–∑–Ω—ñ—à–µ</button>
        <button class="btn">–ü—ñ–¥–ø–∏—Å–∫–∏</button>
        <button class="btn">–¢—Ä–µ–Ω–¥–∏</button>
        <button class="btn">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
      </div>
      <hr style="margin:12px 0; border:none; border-top:1px solid rgba(255,255,255,0.03)" />
      <div class="muted">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó</div>
      <div id="recommendations" style="margin-top:10px; display:flex; flex-direction:column; gap:8px"></div>
    </aside>

    <section>
      <div class="card" style="margin-bottom:12px; display:flex; justify-content:space-between; align-items:center">
        <div>
          <h2 style="margin:0">–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –≤—ñ–¥–µ–æ</h2>
          <div class="muted">–ü–æ—à—É–∫, –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –±–∞–∑–æ–≤–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ —Å—Ç—Ä—ñ—á–∫–∞</div>
        </div>
        <div class="muted">–í—Ö—ñ–¥: <span id="userLabel">–∞–Ω–æ–Ω—ñ–º</span></div>
      </div>

      <div id="videoGrid" class="videos"></div>
    </section>
  </main>

  <!-- Search at bottom -->
  <div class="search-bar" role="search" aria-label="–ü–æ—à—É–∫ –≤—ñ–¥–µ–æ">
    <input id="searchInput" placeholder="–ü–æ—à—É–∫ –≤—ñ–¥–µ–æ, –∫–∞–Ω–∞–ª—ñ–≤, —Ç–µ–º..." />
    <button class="search-btn" id="voiceBtn" title="–ì–æ–ª–æ—Å–æ–≤–∏–π –ø–æ—à—É–∫ (–ø–æ–∫–∏ —â–æ –∑–∞–≥–ª—É—à–∫–∞)">üé§</button>
    <button class="search-btn primary" id="searchBtn">–ü–æ—à—É–∫</button>
  </div>

  <footer>¬© YouFurry ‚Äî –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Ä¢ –ù–µ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –≤—ñ–¥–µ–æ –ª–æ–∫–∞–ª—å–Ω–æ</footer>
</div>

<!-- Player modal -->
<div id="playerModal" class="player-modal" aria-hidden="true">
  <div class="player-card card">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
      <strong id="playerTitle">–í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è</strong>
      <div><button class="btn" id="closePlayer">–ó–∞–∫—Ä–∏—Ç–∏</button></div>
    </div>
    <iframe id="playerFrame" src="" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  </div>
</div>

<!-- Consent modal (big text) -->
<div id="consentModal" class="modal" role="dialog" aria-modal="true">
  <div class="dialog">
    <h2>–£–≥–æ–¥–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ‚Äî YouFurry (—Ç–µ—Å—Ç–æ–≤–∞)</h2>
    <p>
      –®–∞–Ω–æ–≤–Ω–∏–π(-–∞) –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É! –î—è–∫—É—î–º–æ –∑–∞ —ñ–Ω—Ç–µ—Ä–µ—Å –¥–æ YouFurry ‚Äî –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ—ó –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É —Ç–∞ –ø–æ—à—É–∫—É –≤—ñ–¥–µ–æ.
      –ü–µ—Ä–µ–¥ —Ç–∏–º —è–∫ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏, –±—É–¥—å –ª–∞—Å–∫–∞, —É–≤–∞–∂–Ω–æ –æ–∑–Ω–∞–π–æ–º—Ç–µ—Å—è –∑ —Ü—ñ—î—é —É–≥–æ–¥–æ—é. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –¥–æ–¥–∞—Ç–æ–∫ YouFurry, –≤–∏ –ø–æ–≥–æ–¥–∂—É—î—Ç–µ—Å—å –∑ —É–º–æ–≤–∞–º–∏ –Ω–∏–∂—á–µ.
      
      1) –°—É—Ç—å –ø–æ—Å–ª—É–≥–∏: YouFurry –Ω–∞–¥–∞—î—Ç—å—Å—è —è–∫ —Ç–µ—Å—Ç–æ–≤–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ—à—É–∫—É —Ç–∞ –ø–µ—Ä–µ–≥–ª—è–¥—É –≤—ñ–¥–µ–æ —á–µ—Ä–µ–∑ –≤—ñ–¥–∫—Ä–∏—Ç—ñ API. –î–µ—è–∫—ñ —Ñ—É–Ω–∫—Ü—ñ—ó ‚Äî —á–µ—Ä–Ω–µ—Ç–∫–∏ –∞–±–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏.
      
      2) –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å: –†–æ–∑—Ä–æ–±–Ω–∏–∫–∏ –Ω–µ –Ω–µ—Å—É—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ –∑–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç—É, —Ç–µ—Ö–Ω—ñ—á–Ω—ñ –∑–±–æ—ó, –≤—Ç—Ä–∞—Ç—É –¥–∞–Ω–∏—Ö –∞–±–æ —ñ–Ω—à—ñ –Ω–µ—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—ñ. –í–∏ –±–µ—Ä–µ—Ç–µ –Ω–∞ —Å–µ–±–µ —Ä–∏–∑–∏–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç—É –≤ –ø–æ—Ç–æ—á–Ω–æ–º—É –≤–∏–≥–ª—è–¥—ñ.
      
      3) –ö–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—ñ—Å—Ç—å: –î–ª—è —Ä–æ–±–æ—Ç–∏ –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—å –ª–æ–∫–∞–ª—å–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö (localStorage) –¥–ª—è –∑—Ä—É—á–Ω–æ—Å—Ç—ñ ‚Äî –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —Ç–µ—Å—Ç–æ–≤—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ. –ß—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –Ω–∞ –∑–æ–≤–Ω—ñ—à–Ω—ñ —Å–µ—Ä–≤–µ—Ä–∏ —Ü–∏–º –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–º (–∑–∞ –≤–∏–Ω—è—Ç–∫–æ–º –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ YouTube API).
      
      4) API-–∫–ª—é—á: –î–æ–¥–∞–≤—à–∏ API-–∫–ª—é—á –¥–ª—è –ø–æ—à—É–∫—É, –≤–∏ –ø–æ–≥–æ–¥–∂—É—î—Ç–µ—Å—å –∑ —Ç–∏–º, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–ª—é—á–∞ –ø—ñ–¥–ø–æ—Ä—è–¥–∫–æ–≤—É—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª–∞–º –ø–æ—Å—Ç–∞—á–∞–ª—å–Ω–∏–∫–∞ API. –ë—É–¥—å –ª–∞—Å–∫–∞, —É–Ω–∏–∫–∞–π—Ç–µ —Ä–æ–∑–ø–æ–≤—Å—é–¥–∂–µ–Ω–Ω—è –∫–ª—é—á–∞ –≤ –ø—É–±–ª—ñ—á–Ω–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—è—Ö.
      
      5) –ü—Ä–∞–≤–∏–ª–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–Ω—Ç—É: –í–µ—Å—å –≤—ñ–¥–µ–æ–∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞–ª–µ–∂–∏—Ç—å –ø—Ä–∞–≤–æ–≤–ª–∞—Å–Ω–∏–∫–∞–º. YouFurry –Ω–∞–¥–∞—î –ª–∏—à–µ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø—É –¥–æ –º–µ—Ç–∞–¥–∞–Ω–∏—Ö —Ç–∞ –≤–±—É–¥–æ–≤–∞–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–≤–∞—á–∞.
      
      6) –ó–º—ñ–Ω–∏: –¶—è —Ç–µ—Å—Ç–æ–≤–∞ —É–≥–æ–¥–∞ –º–æ–∂–µ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏—Å—è –±–µ–∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –º–µ—Ç–æ—é —Ä–æ–∑–≤–∏—Ç–∫—É –ø—Ä–æ–¥—É–∫—Ç—É.
      
      –ù–∞—Ç–∏—Å–Ω—É–≤—à–∏ "–Ø –∑–≥–æ–¥–µ–Ω(–Ω–∞)", –≤–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î—Ç–µ, —â–æ –ø—Ä–æ—á–∏—Ç–∞–ª–∏ —Ç–∞ –ø–æ–≥–æ–¥–∂—É—î—Ç–µ—Å—å –∑ —Ü–∏–º–∏ —É–º–æ–≤–∞–º–∏.
    </p>
    <div class="actions">
      <button class="btn" id="consentDecline">–í—ñ–¥–º–æ–≤–∏—Ç–∏</button>
      <button class="btn primary" id="consentAccept">–Ø –∑–≥–æ–¥–µ–Ω(–Ω–∞)</button>
    </div>
  </div>
</div>

<!-- Warning modal -->
<div id="warningModal" class="modal" role="dialog" aria-modal="true">
  <div class="dialog">
    <h2>–£–≤–∞–≥–∞ ‚Äî —Ç–µ—Å—Ç–æ–≤–∞ –≤–µ—Ä—Å—ñ—è</h2>
    <p>
      –ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É: YouFurry –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —É —Å—Ç–∞–¥—ñ—ó —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è. –î–µ—è–∫—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –º–æ–∂—É—Ç—å –ø–æ–≤–æ–¥–∏—Ç–∏—Å—å –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–æ –∞–±–æ –±—É—Ç–∏ —Ç–∏–º—á–∞—Å–æ–≤–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω—ñ.
      –ú–æ–∂–ª–∏–≤—ñ –∑–∞—Ç—Ä–∏–º–∫–∏ –ø—Ä–∏ –ø–æ—à—É–∫—É –≤—ñ–¥–µ–æ, –ø–æ–º–∏–ª–∫–∏ –ø—Ä–∏ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—ñ, –∞ —Ç–∞–∫–æ–∂ –æ–±–º–µ–∂–µ–Ω–Ω—è API (–∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤).
      –Ø–∫—â–æ –≤–∏ –Ω–∞—Ç—Ä–∞–ø–∏—Ç–µ –Ω–∞ –ø–æ–º–∏–ª–∫—É ‚Äî –±—É–¥—å –ª–∞—Å–∫–∞, –∑–∞—Ñ—ñ–∫—Å—É–π—Ç–µ —ó—ó —É –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –∞–±–æ –∑–±–µ—Ä–µ–∂—ñ—Ç—å ID —Ç–∞ –Ω–∞–¥—ñ—à–ª—ñ—Ç—å —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—É.
    </p>
    <div class="actions">
      <button class="btn primary" id="warningOk">–†–æ–∑—É–º—ñ—é</button>
    </div>
  </div>
</div>

<!-- Register / Login modal -->
<div id="authModal" class="modal" role="dialog" aria-modal="true">
  <div class="dialog" style="max-width:520px">
    <h2>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è / –í—Ö—ñ–¥</h2>
    <p class="muted">–¶–µ –ª–æ–∫–∞–ª—å–Ω–∞ (—Ç–µ—Å—Ç–æ–≤–∞) —Ñ–æ—Ä–º–∞ ‚Äî –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É –≤–∞—à–æ–º—É –±—Ä–∞—É–∑–µ—Ä—ñ (localStorage).</p>
    <div style="display:grid;gap:8px;margin-top:10px">
      <input id="authEmail" class="form-input" placeholder="Email –∞–±–æ —ñ–º'—è" />
      <input id="authPwd" class="form-input" placeholder="–ü–∞—Ä–æ–ª—å" type="password" />
      <div style="display:flex;gap:8px">
        <button class="btn primary" id="registerBtn">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—å</button>
        <button class="btn" id="loginBtn">–£–≤—ñ–π—Ç–∏</button>
        <button class="btn" id="closeAuth">–ó–∞–∫—Ä–∏—Ç–∏</button>
      </div>
      <div id="authInfo" class="muted"></div>
    </div>
  </div>
</div>

<script>
/*
  YouFurry ‚Äî single-file prototype
  - YouTube Data API v3 search endpoints used (key below)
  - Local storage flags:
      youfurry_consent_accepted
      youfurry_seen_warning
      youfurry_user   -> {name,email}
  - This is a prototype: do not store real passwords here.
*/

// ====== CONFIG ======
const YOUTUBE_API_KEY = 'AIzaSyBVqXcayVNDN63l4WpH2HOrTfAqzh3DTXo'; // —Ç–≤–æ—î –∑–Ω–∞—á–µ–Ω–Ω—è
const YOUTUBE_SEARCH_API = 'https://www.googleapis.com/youtube/v3/search';
const YOUTUBE_VIDEOS_API = 'https://www.googleapis.com/youtube/v3/videos';

// ====== UI refs ======
const consentModal = document.getElementById('consentModal');
const warningModal = document.getElementById('warningModal');
const authModal = document.getElementById('authModal');
const playerModal = document.getElementById('playerModal');
const playerFrame = document.getElementById('playerFrame');
const playerTitle = document.getElementById('playerTitle');

const searchInput = document.getElementById('searchInput');
const searchBtn = document.getElementById('searchBtn');
const videoGrid = document.getElementById('videoGrid');
const recommendationsEl = document.getElementById('recommendations');
const userLabel = document.getElementById('userLabel');
const authBtn = document.getElementById('authBtn');

// ====== On load: show modals in sequence if not accepted ======
window.addEventListener('load', () => {
  const accepted = localStorage.getItem('youfurry_consent_accepted');
  if (!accepted) {
    showModal(consentModal);
  } else {
    const warned = localStorage.getItem('youfurry_seen_warning');
    if (!warned) showModal(warningModal);
  }
  loadUserFromStorage();
  fetchRecommendations(); // initial recommendation load
  fetchPopular(); // additional grid load
});

// ====== Modal helpers ======
function showModal(el){ el.classList.add('show'); el.setAttribute('aria-hidden','false'); }
function hideModal(el){ el.classList.remove('show'); el.setAttribute('aria-hidden','true'); }

// Consent modal actions
document.getElementById('consentAccept').addEventListener('click', () => {
  localStorage.setItem('youfurry_consent_accepted','1');
  hideModal(consentModal);
  showModal(warningModal);
});
document.getElementById('consentDecline').addEventListener('click', () => {
  // If declined ‚Äî keep them but do not allow further usage: we will hide app controls
  alert('–í–∏ –≤—ñ–¥—Ö–∏–ª–∏–ª–∏ —É–≥–æ–¥—É ‚Äî –¥–æ—Å—Ç—É–ø –¥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –æ–±–º–µ–∂–µ–Ω–æ.');
  document.getElementById('app').style.filter = 'blur(4px) grayscale(.6)';
  hideModal(consentModal);
});

// Warning modal action
document.getElementById('warningOk').addEventListener('click', () => {
  localStorage.setItem('youfurry_seen_warning','1');
  hideModal(warningModal);
});

// ====== Auth modal actions (simple localStorage) ======
document.getElementById('registerBtn').addEventListener('click', () => {
  const name = document.getElementById('authEmail').value.trim();
  const pwd = document.getElementById('authPwd').value;
  const info = document.getElementById('authInfo');
  if (!name || !pwd) { info.textContent = '–í–≤–µ–¥—ñ—Ç—å email/—ñ–º‚Äô—è —Ç–∞ –ø–∞—Ä–æ–ª—å.'; return; }
  // Save simple "user"
  const user = { name, pwd };
  localStorage.setItem('youfurry_user', JSON.stringify(user));
  info.textContent = '–ó–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ. –í–∏ —É–≤—ñ–π—à–ª–∏.';
  updateUserLabel(user);
  setTimeout(()=> hideModal(authModal), 800);
});
document.getElementById('loginBtn').addEventListener('click', () => {
  const name = document.getElementById('authEmail').value.trim();
  const pwd = document.getElementById('authPwd').value;
  const info = document.getElementById('authInfo');
  const raw = localStorage.getItem('youfurry_user');
  if (!raw) { info.textContent = '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è.'; return; }
  const saved = JSON.parse(raw);
  if (saved.name === name && saved.pwd === pwd) {
    info.textContent = '–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –Ω–∞–∑–∞–¥!';
    updateUserLabel(saved);
    setTimeout(()=> hideModal(authModal), 700);
  } else info.textContent = '–ù–µ–≤—ñ—Ä–Ω—ñ –æ–±–ª—ñ–∫–æ–≤—ñ –¥–∞–Ω—ñ.';
});
document.getElementById('closeAuth').addEventListener('click', ()=> hideModal(authModal));
document.getElementById('authBtn').addEventListener('click', ()=> showModal(authModal));

function loadUserFromStorage(){
  const raw = localStorage.getItem('youfurry_user');
  if (raw) {
    try{
      const user = JSON.parse(raw);
      updateUserLabel(user);
    }catch(e){}
  }
}
function updateUserLabel(user){
  if (!user) userLabel.textContent = '–∞–Ω–æ–Ω—ñ–º';
  else userLabel.textContent = user.name || '–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á';
}

// ====== Player controls ======
document.getElementById('closePlayer').addEventListener('click', () => {
  playerFrame.src = '';
  hideModal(playerModal);
});

// ====== Search & API helpers ======
searchBtn.addEventListener('click', () => doSearch(searchInput.value.trim()));
searchInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') doSearch(searchInput.value.trim()); });

async function doSearch(q) {
  if (!q) return;
  videoGrid.innerHTML = '<div class="muted">–ü–æ—à—É–∫...</div>';
  try {
    const params = new URLSearchParams({
      key: YOUTUBE_API_KEY,
      part: 'snippet',
      q,
      maxResults: 12,
      type: 'video',
      safeSearch: 'moderate'
    });
    const url = YOUTUBE_SEARCH_API + '?' + params.toString();
    const res = await fetch(url);
    if (!res.ok) throw new Error('API error ' + res.status);
    const data = await res.json();
    renderVideos(data.items);
  } catch (err) {
    console.error(err);
    videoGrid.innerHTML = '<div class="muted">–ü–æ–º–∏–ª–∫–∞ –ø–æ—à—É–∫—É ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–ª—é—á API –∞–±–æ –º–µ—Ä–µ–∂—É. –î–µ—Ç–∞–ª—ñ –≤ –∫–æ–Ω—Å–æ–ª—ñ.</div>';
  }
}

function renderVideos(items){
  if (!items || items.length === 0) { videoGrid.innerHTML = '<div class="muted">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</div>'; return; }
  videoGrid.innerHTML = '';
  items.forEach(it => {
    const vidId = it.id?.videoId || (it.id && it.id.videoId) || (it.id && it.id);
    const thumb = it.snippet.thumbnails?.high?.url || it.snippet.thumbnails?.medium?.url || '';
    const title = it.snippet.title;
    const channel = it.snippet.channelTitle;
    const el = document.createElement('div');
    el.className = 'video';
    el.innerHTML = `
      <img class="thumb" src="${thumb}" loading="lazy" alt="${escapeHtml(title)}" />
      <div class="meta">
        <h3>${escapeHtml(shorten(title, 72))}</h3>
        <p class="muted">${escapeHtml(channel)}</p>
      </div>
    `;
    el.addEventListener('click', () => openPlayer(vidId, title));
    videoGrid.appendChild(el);
  });
}

function openPlayer(videoId, title) {
  playerFrame.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
  playerTitle.textContent = title || '–í—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è';
  showModal(playerModal);
}

// ====== Recommendations & Popular fetch ======
async function fetchRecommendations(){
  // Simple approach: do a search for "recommended" topics (you can refine)
  try {
    const params = new URLSearchParams({
      key: YOUTUBE_API_KEY,
      part: 'snippet',
      q: '—Ç—Ä–µ–Ω–¥–∏ –≤—ñ–¥–µ–æ —Ä–æ–∑–≤–∞–∂–∞–ª—å–Ω–µ',
      maxResults: 6,
      type: 'video',
    });
    const url = YOUTUBE_SEARCH_API + '?' + params.toString();
    const res = await fetch(url);
    if (res.ok){
      const data = await res.json();
      recommendationsEl.innerHTML = '';
      (data.items || []).forEach(it => {
        const d = document.createElement('div');
        d.style.display='flex'; d.style.gap='8px'; d.style.alignItems='center';
        d.innerHTML = `<img src="${it.snippet.thumbnails?.default?.url}" style="width:64px;height:44px;border-radius:8px;object-fit:cover" />
          <div style="flex:1"><div style="font-size:13px">${shorten(it.snippet.title,40)}</div><div class="muted" style="font-size:12px">${it.snippet.channelTitle}</div></div>`;
        d.addEventListener('click', ()=> openPlayer(it.id.videoId, it.snippet.title));
        recommendationsEl.appendChild(d);
      });
    } else {
      recommendationsEl.innerHTML = '<div class="muted">–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó</div>';
    }
  } catch (e) {
    console.error(e);
    recommendationsEl.innerHTML = '<div class="muted">–ü–æ–º–∏–ª–∫–∞ –º–µ—Ä–µ–∂—ñ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π</div>';
  }
}

async function fetchPopular(){
  // Fallback: search for 'music' to fill grid initially
  try {
    const params = new URLSearchParams({
      key: YOUTUBE_API_KEY,
      part: 'snippet',
      q: 'music',
      maxResults: 12,
      type: 'video'
    });
    const res = await fetch(YOUTUBE_SEARCH_API + '?' + params.toString());
    const data = await res.json();
    renderVideos(data.items);
  } catch (e) {
    console.error(e);
    videoGrid.innerHTML = '<div class="muted">–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø–æ—á–∞—Ç–∫–æ–≤—É —Å—Ç—Ä—ñ—á–∫—É.</div>';
  }
}

// ====== Utilities ======
function shorten(s,n){ if(!s) return ''; return s.length>n? s.slice(0,n-1)+'‚Ä¶':s; }
function escapeHtml(s){ return s ? s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])) : ''; }

// ====== Small helpers for buttons in header ----
document.getElementById('homeBtn').addEventListener('click', () => { fetchPopular(); window.scrollTo({top:0,behavior:'smooth'}); });
document.getElementById('uploadBtn').addEventListener('click', () => alert('–§—É–Ω–∫—Ü—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ —É —Ç–µ—Å—Ç–æ–≤—ñ–π –≤–µ—Ä—Å—ñ—ó.'));
document.getElementById('subscriptionsBtn').addEventListener('click', () => alert('–ü—ñ–¥–ø–∏—Å–∫–∏: –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω–∏–π —Ä–æ–∑–¥—ñ–ª.'));
document.getElementById('libraryBtn').addEventListener('click', () => alert('–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞: –ø–æ–∫–∏ –ø–æ—Ä–æ–∂–Ω—å–æ.'));

// ====== small keyboard cheat: "r" to reopen modals for testing =====
document.addEventListener('keydown',(e)=>{
  if (e.key === 'r') { showModal(consentModal); }
});

// Note: This is a prototype. For production:
// - –ù–µ –∑–±–µ—Ä—ñ–≥–∞–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ñ –∫–ª—é—á—ñ —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É JS.
// - –†–æ–±—ñ—Ç—å –±–µ–∫–µ–Ω–¥-–ø—Ä–æ–∫—Å—ñ –¥–ª—è API-–∫–ª—é—á—ñ–≤, –¥–æ–¥–∞–π—Ç–µ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é —Ç–∞ –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –≤–∏—Ç–æ–∫—É –∫–ª—é—á—ñ–≤.
// - –ü–∞—Ä–æ–ª—ñ –≤ localStorage ‚Äî –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ.
</script>
</body>
</html>
