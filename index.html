<!doctype html>  
<html lang="uk">  
<head>  
  <meta charset="utf-8" />  
  <meta name="viewport" content="width=device-width,initial-scale=1" />  
  <title>YouFurry — відеоплатформа (One-file)</title>  
  <style>  
    :root{  
      --bg: #fff;  
      --accent: #ff3b3b;  
      --muted: #6b7280;  
      --card: #f7f7fa;  
      --rounded: 12px;  
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;  
    }  
    *{box-sizing:border-box}  
    body{margin:0;background:linear-gradient(90deg,#fff 0%,#fff0 100%);color:#111}  
    .topbar{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;border-bottom:1px solid #eee;background:rgba(255,255,255,0.8);position:sticky;top:0;backdrop-filter: blur(4px);z-index:10}  
    .logo{display:flex;align-items:center;gap:10px}  
    .logo-icon{width:42px;height:42px;background:var(--accent);color:white;border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:700}  
    .logo-text{font-size:20px;font-weight:700;color:var(--accent)}  
    .search-area{flex:1;display:flex;justify-content:center;gap:8px}  
    .search-area input{width:60%;max-width:680px;padding:10px 12px;border-radius:24px;border:1px solid #e5e7eb}  
    .search-area button{padding:10px 14px;border-radius:20px;background:var(--accent);color:#fff;border:0;cursor:pointer}  
    .actions button{margin-left:8px;padding:8px 12px;border-radius:10px;border:1px solid #eee;background:#fff;cursor:pointer}  

    /* layout */  
    .container{display:flex;gap:20px;padding:20px}  
    .sidebar{width:200px}  
    .nav-item{display:block;width:100%;padding:10px 12px;border-radius:10px;border:0;background:transparent;text-align:left;color:var(--muted);margin-bottom:6px;cursor:pointer}  
    .nav-item.active{background:#fff;color:var(--accent);box-shadow:0 2px 6px rgba(0,0,0,0.04)}  

    .content{flex:1}  
    .grid-controls{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}  
    .videos-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}  

    /* card */  
    .card{background:var(--card);border-radius:12px;overflow:hidden;box-shadow:0 2px 6px rgba(16,24,40,0.04);cursor:pointer;display:flex;flex-direction:column}  
    .thumb{height:130px;background:#ddd;display:flex;align-items:center;justify-content:center;position:relative}  
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}  
    .play-btn{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:48px;height:48px;border-radius:50%;background:rgba(0,0,0,0.6);color:#fff;display:flex;align-items:center;justify-content:center;font-size:18px}  
    .card-body{padding:10px}  
    .title{font-weight:600;font-size:14px;margin-bottom:6px}  
    .meta{font-size:12px;color:var(--muted)}  

    /* modal */  
    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center}  
    .modal.hidden{display:none}  
    .modal-content{background:#fff;padding:12px;border-radius:12px;width:min(900px,95%);max-height:90vh;overflow:auto;position:relative}  
    .close-btn{position:absolute;right:10px;top:8px;border:0;background:transparent;font-size:20px;cursor:pointer}  
    #playerArea iframe, #playerArea video{width:100%;height:480px;border-radius:8px;background:#000}  
    @media(max-width:800px){  
      .sidebar{display:none}  
      .search-area input{width:70%}  
      #playerArea iframe, #playerArea video{height:260px}  
    }  

    /* small helpers */  
    .small-muted{color:var(--muted);font-size:12px}  
    .top-controls{display:flex;gap:8px;align-items:center}  
  </style>  
</head>  
<body>  
  <header class="topbar">  
    <div class="logo">  
      <div class="logo-icon">▶</div>  
      <div class="logo-text">YouFurry</div>  
    </div>  
    <div class="search-area">  
      <input id="searchInput" type="search" placeholder="Пошук відео..." />  
      <button id="searchBtn">Шукати</button>  
    </div>  
    <div class="actions">  
      <button id="uploadBtn">Завантажити</button>  
      <button id="profileBtn">Профіль</button>  
    </div>  
  </header>  

  <div class="container">  
    <nav class="sidebar">  
      <button class="nav-item active" data-section="home">Головна</button>  
      <button class="nav-item" data-section="subscriptions">Підписки</button>  
      <button class="nav-item" data-section="trending">Тренди</button>  
      <button class="nav-item" data-section="library">Бібліотека</button>  
      <button class="nav-item" data-section="favorites">Улюблені</button>  
    </nav>  

    <main class="content">  
      <section class="grid-controls">  
        <h1>YouFurry</h1>  
        <div class="top-controls">  
          <select id="sortSelect">  
            <option value="relevance">За релевантністю</option>  
            <option value="new">Нові</option>  
            <option value="popular">Популярні</option>  
          </select>  
          <label class="small-muted" style="margin-left:8px">  
            Режим:  
            <select id="modeSelect" title="Виберіть режим відтворення">  
              <option value="local">Локальні демо-відео</option>  
              <option value="youtube">YouTube API (потрібен ключ)</option>  
            </select>  
          </label>  
        </div>  
      </section>  

      <section id="videosGrid" class="videos-grid" aria-live="polite">  
        <!-- Відеокартки генеруються скриптом -->  
      </section>  
    </main>  
  </div>  

  <!-- Modal для відтворення -->  
  <div id="playerModal" class="modal hidden" role="dialog" aria-modal="true">  
    <div class="modal-content">  
      <button id="closeModal" class="close-btn" title="Закрити">✕</button>  
      <div id="playerArea">  
        <!-- Тег iframe або відео -->  
      </div>  
      <div id="videoMeta"></div>  
    </div>  
  </div>  

  <script>  
    /****************************************************************  
     * YouFurry — One-file demo  
     * Вставте свій YouTube API ключ нижче в змінну YOUTUBE_API_KEY,  
     * якщо хочете використовувати режим "YouTube API".  
     *  
     * WARNING: НЕ РЕКОМЕНДУЮ розміщувати реальний ключ у клієнтському  
     * коді, якщо файл може стати доступним іншим.  
     ****************************************************************/  

    // ----------------- demo data (локальні заглушки) -----------------  
    const demoVideos = [  
      {  
        id: 'yf1',  
        title: 'Furry Adventures — Episode 1',  
        thumb: 'data:image/svg+xml;utf8,' + encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="600" height="360"><rect width="100%" height="100%" fill="#cfe9f9"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="30" fill="#334155">Furry 1</text></svg>`),  
        channel: 'YouFurry Studio',  
        views: '1200000',  
        duration: '4:12',  
        // локальний або зовнішній mp4 (якщо хочете, поміняйте на свої)  
        src: '' // порожній за замовчуванням  
      },  
      {  
        id: 'yf2',  
        title: 'Corgi Tips & Tricks',  
        thumb: 'data:image/svg+xml;utf8,' + encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="600" height="360"><rect width="100%" height="100%" fill="#ffdbe6"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="30" fill="#7f1d1d">Corgi</text></svg>`),  
        channel: 'FurTube',  
        views: '842000',  
        duration: '6:05',  
        src: ''  
      },  
      {  
        id: 'yf3',  
        title: 'Meet the Foxes',  
        thumb: 'data:image/svg+xml;utf8,' + encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="600" height="360"><rect width="100%" height="100%" fill="#efe9ff"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="30" fill="#4c1d95">Foxes</text></svg>`),  
        channel: 'AnimAll',  
        views: '420000',  
        duration: '3:33',  
        src: ''  
      },  
      {  
        id: 'yf4',  
        title: 'Cute Cats Compilation',  
        thumb: 'data:image/svg+xml;utf8,' + encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="600" height="360"><rect width="100%" height="100%" fill="#fff1c9"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="30" fill="#7c3aed">Cats</text></svg>`),  
        channel: 'YouFurry Studio',  
        views: '2300000',  
        duration: '10:11',  
        src: ''  
      }  
    ];  

    // ----------------- Config / API key -----------------  
    // ВАЖЛИВО: якщо ви вставляєте реальний ключ, робіть це на свій ризик.  
    // Замість цього рекомендую використовувати бекенд-проксі.  
    const YOUTUBE_API_KEY = 'AIzaSyBVqXcayVNDN63l4WpH2HOrTfAqzh3DTXo'; // <- Вставте свій ключ сюди (як просили)  
    // Якщо не хочете використовувати ключ — встановіть порожній рядок:  
    // const YOUTUBE_API_KEY = '';  

    // ----------------- DOM references -----------------  
    const videosGrid = document.getElementById('videosGrid');  
    const searchInput = document.getElementById('searchInput');  
    const searchBtn = document.getElementById('searchBtn');  
    const sortSelect = document.getElementById('sortSelect');  
    const playerModal = document.getElementById('playerModal');  
    const playerArea = document.getElementById('playerArea');  
    const videoMeta = document.getElementById('videoMeta');  
    const closeModal = document.getElementById('closeModal');  
    const modeSelect = document.getElementById('modeSelect');  

    // ----------------- Helpers -----------------  
    function numberWithCommas(x){  
      if(!x) return '0';  
      return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");  
    }  

    function renderCards(list){  
      videosGrid.innerHTML = '';  
      list.forEach(v=>{  
        const card = document.createElement('article');  
        card.className = 'card';  
        card.innerHTML = `  
          <div class="thumb" data-id="${v.id}">  
            <img src="${v.thumb}" alt="${escapeHtml(v.title)}" />  
            <div class="play-btn" aria-hidden="true">▶</div>  
          </div>  
          <div class="card-body">  
            <div class="title">${escapeHtml(v.title)}</div>  
            <div class="meta">${escapeHtml(v.channel)} • ${numberWithCommas(v.views)} views</div>  
          </div>  
        `;  
        // Клік по обкладинці відкриває модал  
        card.querySelector('.thumb').addEventListener('click', () => openPlayer(v));  
        videosGrid.appendChild(card);  
      });  
    }  

    // Простий захист від XSS в даних  
    function escapeHtml(str){  
      if(!str) return '';  
      return String(str).replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]); });  
    }  

    // ----------------- Player -----------------  
    function openPlayer(video){  
      playerArea.innerHTML = '';  
      videoMeta.innerHTML = '';  
      const mode = modeSelect.value;  

      if(mode === 'local'){  
        // Локальний режим: якщо є src -> використовуємо <video>, інакше — покажемо повідомлення  
        if(video.src){  
          const videoEl = document.createElement('video');  
          videoEl.controls = true;  
          videoEl.src = video.src;  
          videoEl.autoplay = true;  
          playerArea.appendChild(videoEl);  
        } else {  
          // Нема локального файлу — покажемо великий плакат і короткий опис  
          const poster = document.createElement('div');  
          poster.style.background = '#000';  
          poster.style.color = '#fff';  
          poster.style.padding = '40px';  
          poster.style.textAlign = 'center';  
          poster.innerHTML = `<h2 style="margin:0 0 8px">${escapeHtml(video.title)}</h2><p style="margin:0 0 12px">Локальний файл не заданий. Ви можете додати шлях до mp4 в demoVideos[].src</p><button id="embedYoutubeBtn">Відтворити на YouTube (ембед)</button>`;  
          playerArea.appendChild(poster);  

          document.getElementById('embedYoutubeBtn').addEventListener('click', ()=>{  
            // Якщо відео має поле youtubeId, можна відтворити ембед  
            if(video.youtubeId) {  
              loadYouTubeEmbed(video.youtubeId);  
            } else {  
              alert('Немає YouTube ID для цього відео.');  
            }  
          });  
        }  
      } else if(mode === 'youtube'){  
        // YouTube режим — якщо в об'єкті є youtubeId, відтворюємо його.  
        // Якщо немає — робимо запит пошуку по title (потребує ключ)  
        if(!YOUTUBE_API_KEY){  
          playerArea.innerHTML = '<div style="padding:20px;color:#111">YouTube API key не заданий. Встановіть YOUTUBE_API_KEY у коді.</div>';  
        } else if(video.youtubeId){  
          load
