<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <!-- Вимкнути масштабування (pinch / double-tap zoom) за запитом користувача -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>YutFurry - YouTube клієнт (адаптовано)</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body {
            height: 100%;
            -webkit-text-size-adjust: 100%;
            touch-action: manipulation; /* знижує ймовірність небажаного масштабування/жестів */
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0f0f0f;
            color: #ffffff;
            line-height: 1.5;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
        }

    /* layout */
    .container { display: flex; min-height: 100vh; }

    /* Sidebar */
    .sidebar {
        width: 240px;
        background-color: #0f0f0f;
        padding: 12px;
        position: fixed;
        height: 100vh;
        overflow-y: auto;
        border-right: 1px solid #272727;
        transition: transform 0.25s ease;
        z-index: 30;
    }

    .logo { display:flex; align-items:center; padding: 0 12px; margin-bottom: 20px; }
    .logo-icon{
        background: linear-gradient(45deg, #ff0000, #ff6b6b);
        color:white; width:40px;height:40px;border-radius:8px;
        display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:18px;margin-right:12px;
    }
    .logo-text{
        font-size:20px;font-weight:bold;
        background:linear-gradient(45deg,#ff0000,#ff6b6b);
        -webkit-background-clip:text;-webkit-text-fill-color:transparent;
    }

    .nav-section { margin-bottom: 24px; }
    .nav-title { padding: 8px 24px; font-size:14px; color:#aaa; text-transform:uppercase; letter-spacing:0.5px; }
    .nav-item {
        display:flex; align-items:flex-start; gap:12px;
        padding: 10px 24px; border-radius:12px; cursor:pointer; transition: all .2s ease; margin-bottom:6px;
    }
    .nav-item:hover { background:#272727; }
    .nav-item.active { background:#272727; }
    .nav-icon { width:24px; height:24px; display:flex; align-items:center; justify-content:center; }

    /* main content */
    .main-content { flex:1; margin-left:240px; padding: 20px 16px 120px 16px; } /* bottom padding for mobile bottom nav */

    /* search */
    .top-search {
        display:none; /* shown on mobile */
        position:fixed;
        top:0; left:0; right:0;
        height:56px;
        background:#0f0f0f; border-bottom:1px solid #272727;
        z-index:40;
        display:flex; align-items:center; gap:12px; padding:8px 12px;
    }
    .top-search .logo-icon-small{ width:36px; height:36px; border-radius:6px; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:16px; }
    .search-container {
        display:flex; align-items:center; background:#272727; border-radius:24px; padding:8px 12px; max-width:720px; width:100%;
    }
    .search-input { flex:1; background:transparent; border:none; color:white; font-size:16px; padding:6px 8px; outline:none; }
    .search-button { background:#373737; border:none; color:white; padding:8px 12px; border-radius:20px; cursor:pointer; }

    /* categories */
    .categories { display:flex; gap:12px; margin:16px 0 20px 0; flex-wrap:nowrap; overflow-x:auto; padding-bottom:6px; }
    .category { background:#373737; padding:8px 14px; border-radius:20px; cursor:pointer; font-size:14px; white-space:nowrap; }
    .category.active { background:white; color:black; }

    /* video grid (desktop) */
    .video-grid {
        display:grid;
        grid-template-columns: repeat(auto-fill, minmax(320px,1fr));
        gap:20px;
        margin-bottom:40px;
    }
    .video-card {
        background:#1a1a1a; border-radius:12px; overflow:hidden; transition: transform .25s, box-shadow .25s; cursor:pointer;
    }
    .video-card:hover{ transform:translateY(-4px); box-shadow:0 8px 24px rgba(255,255,255,0.03); }
    .thumbnail { width:100%; height:180px; background:#373737; position:relative; overflow:hidden; }
    .thumbnail img{ width:100%; height:100%; object-fit:cover; display:block; }
    .duration { position:absolute; bottom:8px; right:8px; background:rgba(0,0,0,0.8); padding:2px 6px; border-radius:4px; font-size:12px; }

    .video-info { padding:12px; }
    .video-title { font-weight:600; margin-bottom:8px; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
    .channel-info { display:flex; align-items:center; margin-bottom:4px; gap:12px; }
    .channel-avatar { width:36px; height:36px; border-radius:50%; background:#373737; overflow:hidden; flex-shrink:0; }
    .channel-avatar img{ width:100%; height:100%; object-fit:cover; }
    .channel-name{ color:#aaa; font-size:14px; }
    .video-stats{ color:#aaa; font-size:14px; margin-left:48px; }

    /* modal */
    .video-modal {
        position:fixed; top:0; left:0; right:0; bottom:0;
        background:rgba(0,0,0,0.9); display:none; align-items:center; justify-content:center; z-index:1000; padding:16px;
    }
    .video-modal.active{ display:flex; }
    .video-player-container { width:100%; max-width:1100px; background:#1a1a1a; border-radius:12px; overflow:hidden; position:relative; }
    .close-button { position:absolute; top:12px; right:12px; background:rgba(0,0,0,0.7); border:none; color:white; width:40px; height:40px; border-radius:50%; cursor:pointer; z-index:10; font-size:20px; display:flex; align-items:center; justify-content:center; }
    .video-player { width:100%; height:0; padding-bottom:56.25%; position:relative; }
    .video-player iframe{ position:absolute; top:0; left:0; width:100%; height:100%; border:0; }
    .player-info { padding:16px; }
    .player-title{ font-size:18px; font-weight:600; margin-bottom:8px; }
    .player-stats{ display:flex; justify-content:space-between; color:#aaa; font-size:13px; margin-bottom:12px; }
    .player-actions{ display:flex; gap:12px; margin-bottom:12px; flex-wrap:wrap; }
    .action-button{ background:#373737; border:none; color:white; padding:8px 12px; border-radius:20px; cursor:pointer; display:flex; align-items:center; gap:8px; }

    .player-description{ background:#272727; padding:12px; border-radius:8px; font-size:14px; line-height:1.4; }

    .loading { text-align:center; padding:40px; color:#aaa; }

    /* ------------ MOBILE SPECIFIC ------------ */
    @media (max-width: 900px) {
        /* make sidebar compact */
        .sidebar { width:72px; }
        .main-content { margin-left:72px; padding-top:76px; padding-bottom:120px; } /* top padding for mobile top search */
        .nav-title, .nav-text { display:none; }
        .nav-item { justify-content:center; padding:12px; }
        .nav-icon { margin-right:0; }
    }

    @media (max-width: 768px) {
        /* hide sidebar fully (like mobile app that uses top/bottom nav) */
        .sidebar { transform: translateX(-110%); position:fixed; left:0; top:0; bottom:0; z-index:30; }
        .main-content { margin-left:0; padding-top:70px; padding-left:8px; padding-right:8px; } /* зменшено padding для щільнішого вигляду */

        /* show mobile top search bar */
        .top-search { display:flex; }

        /* video list like YouTube mobile */
        .video-grid {
            display:flex;
            flex-direction:column;
            gap:8px; /* зменшено відступ між карточками */
            margin-bottom:80px;
        }
        .video-card {
            display:flex;
            gap:8px; /* зменшено відступ між thumbnail та інформацією */
            align-items:flex-start;
            border-radius:10px;
            background:transparent;
            padding:6px 0;
        }
        .thumbnail { width:46%; height:120px; border-radius:8px; flex-shrink:0; } /* трохи ширше для кращого заповнення екрану */
        .video-info { padding:0 4px; width:54%; } /* зменшено паддінг і ширина під контент */
        .video-title { font-size:15px; display:-webkit-box; -webkit-line-clamp:2; margin-bottom:6px; }
        .channel-info { margin-top:6px; gap:8px; }
        .channel-name{ font-size:13px; color:#bbb; }
        .video-stats{ font-size:12px; color:#888; margin-left:0; }

        /* adjust modal to be full screen and remove extra margins */
        .video-player-container { border-radius:0; height:100vh; max-width:100%; display:flex; flex-direction:column; }
        .video-player { padding-bottom:56.25%; height:auto; }
        .player-info { overflow:auto; max-height:40vh; padding:12px; }

        /* bottom nav */
        .bottom-nav {
            position:fixed; left:0; right:0; bottom:0; height:56px; background:#0f0f0f; border-top:1px solid #272727; display:flex; z-index:50;
            justify-content:space-around; align-items:center; gap:6px;
        }
        .bottom-nav .nav-item-mobile { display:flex; flex-direction:column; align-items:center; justify-content:center; color:#bbb; font-size:11px; gap:4px; text-decoration:none; }
        .bottom-nav .nav-item-mobile.active { color:white; }
    }

    /* very small screens */
    @media (max-width: 420px) {
        .thumbnail { height:110px; }
        .video-card { gap:8px; }
        .player-title { font-size:16px; }
        .search-input { font-size:15px; }
    }

    /* Accessibility: ensure controls are tappable */
    .search-button, .action-button, .close-button {
        -webkit-tap-highlight-color: rgba(255,255,255,0.05);
        touch-action: manipulation;
    }
</style>
        <nav>
            <div class="nav-item" data-nav="home" style="padding:8px;border-radius:8px;background:#141414;margin-bottom:6px;display:flex;gap:10px;align-items:center;cursor:pointer">
                <div>🏠</div><div style="font-size:14px">Головна</div>
            </div>
            <div class="nav-item" data-nav="trending" style="padding:8px;border-radius:8px;margin-bottom:6px;display:flex;gap:10px;align-items:center;cursor:pointer">
                <div>🔥</div><div style="font-size:14px">Тренди</div>
            </div>
            <div class="nav-item" data-nav="subscriptions" style="padding:8px;border-radius:8px;display:flex;gap:10px;align-items:center;cursor:pointer">
                <div>📺</div><div style="font-size:14px">Підписки</div>
            </div>
        </nav>
    </aside>

    <!-- Topbar with SINGLE search field (used on desktop + mobile) -->
    <header class="topbar" role="banner">
        <div style="display:flex;align-items:center;gap:12px;margin-right:12px;">
            <div class="logo-icon" style="width:36px;height:36px;font-size:14px">YF</div>
        </div>

        <div class="search-wrap" style="flex:1">
            <!-- ЄДИНЕ поле пошуку для усіх екранів -->
            <input id="searchInput" class="search-input" type="search" placeholder="Пошук відео..." aria-label="Пошук відео" />
            <button id="searchButton" class="search-button" type="button">Пошук</button>
        </div>
    </header>

    <!-- Main content -->
    <main class="main" id="mainContent" role="main">
        <div class="categories" id="categories">
            <div class="category active">Усі</div>
            <div class="category">Популярне</div>
            <div class="category">Музика</div>
            <div class="category">Ігри</div>
            <div class="category">Фільми</div>
            <div class="category">Навчання</div>
        </div>

        <section id="videoGrid" class="video-grid" aria-live="polite">
            <div class="loading">Завантаження популярних відео...</div>
        </section>
    </main>

    <!-- Video modal -->
    <div id="videoModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="player" role="document" id="playerContainer">
            <button class="close" id="closeModal" aria-label="Закрити">✕</button>
            <div class="video-frame" id="videoFrame"></div>
            <div class="player-info" id="playerInfo"></div>
        </div>
    </div>
</div>

<script>
    /******************************************************************
     * Важливе:
     * Залишив можливість використовувати реальний API KEY.
     * Якщо хочеш — заміни API_KEY на свій реальний ключ.
     ******************************************************************/
    const API_KEY = 'AIzaSyBVqXcayVNDN63l4WpH2HOrTfAqzh3DTXo'; // <-- залишено як просили
    const MAX_RESULTS = 12;

    // Фолбек — sample videos (щоб UI працював коли API недоступний)
    const sampleVideos = [
        {
            id: { videoId: 'dQw4w9WgXcQ' },
            snippet: {
                title: 'Never Gonna Give You Up - Rick Astley',
                description: 'Official video for Rick Astley - Never Gonna Give You Up',
                channelTitle: 'Rick Astley',
                publishedAt: '2009-10-25T06:57:33Z',
                thumbnails: { medium: { url: 'https://img.youtube.com/vi/dQw4w9WgXcQ/mqdefault.jpg' } }
            },
            statistics: { viewCount: '1500000000', likeCount: '12000000' }
        },
        {
            id: { videoId: 'kJQP7kiw5Fk' },
            snippet: {
                title: 'Despacito ft. Daddy Yankee',
                description: 'Luis Fonsi - Despacito ft. Daddy Yankee',
                channelTitle: 'Luis Fonsi',
                publishedAt: '2017-01-13T04:59:31Z',
                thumbnails: { medium: { url: 'https://img.youtube.com/vi/kJQP7kiw5Fk/mqdefault.jpg' } }
            },
            statistics: { viewCount: '8000000000', likeCount: '50000000' }
        },
        {
            id: { videoId: '9bZkp7q19f0' },
            snippet: {
                title: 'PSY - GANGNAM STYLE',
                description: 'PSY - GANGNAM STYLE M/V',
                channelTitle: 'officialpsy',
                publishedAt: '2012-07-15T07:46:32Z',
                thumbnails: { medium: { url: 'https://img.youtube.com/vi/9bZkp7q19f0/mqdefault.jpg' } }
            },
            statistics: { viewCount: '4500000000', likeCount: '23000000' }
        }
    ];

    // DOM елементи
    const searchInput = document.getElementById('searchInput');
    const searchButton = document.getElementById('searchButton');
    const videoGrid = document.getElementById('videoGrid');
    const videoModal = document.getElementById('videoModal');
    const videoFrame = document.getElementById('videoFrame');
    const playerInfo = document.getElementById('playerInfo');
    const closeModal = document.getElementById('closeModal');
    const categoriesEl = document.getElementById('categories');

    // поточні відео в UI (масив об’єктів)
    let currentVideos = [];

    // Ініціалізація
    document.addEventListener('DOMContentLoaded', () => {
        // заблокувати pinch/gesture zoom додатково (для старих браузерів)
        window.addEventListener('gesturestart', function (e) { e.preventDefault(); });

        // події пошуку
        searchButton.addEventListener('click', onSearch);
        searchInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') onSearch(); });

        // закрити модалку
        closeModal.addEventListener('click', closePlayer);
        window.addEventListener('keydown', (e) => { if (e.key === 'Escape') closePlayer(); });

        // categories click
        categoriesEl.querySelectorAll('.category').forEach(c => {
            c.addEventListener('click', () => {
                categoriesEl.querySelectorAll('.category').forEach(x => x.classList.remove('active'));
                c.classList.add('active');
                onCategorySelect(c.textContent.trim());
            });
        });

        // завантажити популярні відео
        loadPopularVideos();
    });

    /* ---------- ФУНКЦІЇ API / Завантаження ---------- */

    // Виконуємо пошук відео (YouTube Search API + Videos.stats)
    async function onSearch() {
        const q = (searchInput.value || '').trim();
        if (!q) return;
        showLoading('Пошук...');
        try {
            // search
            const searchUrl = `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(q)}&type=video&maxResults=${MAX_RESULTS}&key=${API_KEY}`;
            const res = await fetch(searchUrl);
            const data = await res.json();
            if (!data.items || data.items.length === 0) {
                // fallback - local samples
                const filtered = sampleVideos.filter(v => v.snippet.title.toLowerCase().includes(q.toLowerCase()));
                displayVideos(filtered.length ? filtered : []);
                return;
            }
            // отримуємо статистику для всіх videoIds
            const ids = data.items.map(i => i.id.videoId).filter(Boolean).join(',');
            const statsMap = await fetchStatsMap(ids);
            // зберігаємо структуру із statistics
            const videos = data.items.map(item => ({
                id: { videoId: item.id.videoId },
                snippet: item.snippet,
                statistics: statsMap[item.id.videoId] || { viewCount: '0', likeCount: '0' }
            }));
            displayVideos(videos);
        } catch (err) {
            console.error('Search error', err);
            showLoading('Помилка пошуку. Використано локальні приклади.');
            displayVideos(sampleVideos);
        }
    }

    // Завантажити популярні відео (chart=mostPopular)
    async function loadPopularVideos() {
        showLoading('Завантаження популярних відео...');
        try {
            const url = `https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&chart=mostPopular&maxResults=${MAX_RESULTS}&regionCode=UA&key=${API_KEY}`;
            const res = await fetch(url);
            const data = await res.json();
            if (!data.items || data.items.length === 0) {
                displayVideos(sampleVideos);
                return;
            }
            // перетворимо формат на спільний із search results (id.videoId)
            const videos = data.items.map(item => ({
                id: { videoId: item.id },
                snippet: item.snippet,
                statistics: item.statistics || { viewCount: '0', likeCount: '0' }
            }));
            displayVideos(videos);
        } catch (err) {
            console.error('Load popular error', err);
            displayVideos(sampleVideos);
        }
    }

    // Повертає map { videoId: statistics }
    async function fetchStatsMap(idsCommaSeparated) {
        if (!idsCommaSeparated) return {};
        try {
            const url = `https://www.googleapis.com/youtube/v3/videos?part=statistics&id=${idsCommaSeparated}&key=${API_KEY}`;
            const res = await fetch(url);
            const data = await res.json();
            if (!data.items) return {};
            const map = {};
            data.items.forEach(item => {
                map[item.id] = item.statistics || {};
            });
            return map;
        } catch (err) {
            console.error('fetchStatsMap error', err);
            return {};
        }
    }

    /* ---------- UI: відображення/взаємодія ---------- */

    function showLoading(text='Завантаження...') {
        videoGrid.innerHTML = `<div class="loading">${escapeHtml(text)}</div>`;
    }

    function displayVideos(videos) {
        currentVideos = videos || [];
        if (!videos || videos.length === 0) {
            videoGrid.innerHTML = `<div class="loading">Відео не знайдено</div>`;
            return;
        }

        // Згенеруємо розмітку і потім додамо слухачі — НЕ використовуємо inline onclick
        videoGrid.innerHTML = videos.map((v, idx) => {
            const vid = getVideoId(v);
            const thumb = v.snippet.thumbnails?.medium?.url || 'https://via.placeholder.com/320x180/333333/ffffff?text=No+Thumb';
            const title = escapeHtml(v.snippet.title || 'Без назви');
            const channel = escapeHtml(v.snippet.channelTitle || '');
            const views = formatViewCount(v.statistics?.viewCount || '0');
            const timeAgo = formatTimeAgo(v.snippet.publishedAt || '');
            return `
                <article class="video-card" data-videoid="${vid}" role="button" tabindex="0" aria-label="${title}">
                    <div class="thumbnail">
                        <img src="${thumb}" alt="${title}" onerror="this.src='https://via.placeholder.com/320x180/333333/ffffff?text=Thumbnail'">
                        <div class="duration">5:30</div>
                    </div>
                    <div class="video-body">
                        <div class="title">${title}</div>
                        <div class="meta">${channel} • ${views} переглядів • ${timeAgo}</div>
                    </div>
                </article>
            `;
        }).join('');

        // Додамо слухачі на кожну карточку
        videoGrid.querySelectorAll('.video-card').forEach(card => {
            const vid = card.getAttribute('data-videoid');
            card.addEventListener('click', () => openPlayer(vid));
            card.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') openPlayer(vid); });
        });
    }

    // Отримати videoId з об'єкта (підтримує декілька форматів)
    function getVideoId(video) {
        if (!video) return '';
        if (video.id && typeof video.id === 'object' && video.id.videoId) return video.id.videoId;
        if (video.id && typeof video.id === 'string') return video.id;
        return '';
    }

    // Відкрити player modal
    function openPlayer(videoId) {
        if (!videoId) return;
        // знайдемо відео в currentVideos (щоб показати метадані)
        const video = currentVideos.find(v => getVideoId(v) === videoId) || null;

        // створимо iframe
        videoFrame.innerHTML = '';
        const iframe = document.createElement('iframe');
        iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1`;
        iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
        iframe.allowFullscreen = true;
        iframe.setAttribute('loading','lazy');
        videoFrame.appendChild(iframe);

        // заповнимо інформацію під відео
        playerInfo.innerHTML = `
            <div style="font-weight:700;font-size:16px;margin-bottom:8px">${escapeHtml(video?.snippet?.title || '')}</div>
            <div style="color:#aaa;font-size:13px;display:flex;justify-content:space-between;align-items:center">
                <div>${formatViewCount(video?.statistics?.viewCount || '0')} переглядів</div>
                <div>${formatTimeAgo(video?.snippet?.publishedAt || '')}</div>
            </div>
            <div class="actions" style="margin-top:12px">
                <button class="btn" id="likeBtn">👍 ${formatCount(video?.statistics?.likeCount || '0')}</button>
                <button class="btn" id="dislikeBtn">👎 Не подобається</button>
                <button class="btn" id="shareBtn">📤 Поділитися</button>
                <button class="btn" id="saveBtn">💾 Зберегти</button>
            </div>
            <div style="background:#181818;padding:10px;border-radius:8px;color:#ddd;font-size:14px;margin-top:8px">${escapeHtml(video?.snippet?.description || '')}</div>
        `;

        // відкриваємо модалку
        videoModal.classList.add('open');
        videoModal.setAttribute('aria-hidden','false');
        document.body.style.overflow = 'hidden';

        // Додамо функціонал кнопкам (симуляції)
        const like = document.getElementById('likeBtn');
        const dislike = document.getElementById('dislikeBtn');
        const share = document.getElementById('shareBtn');
        const save = document.getElementById('saveBtn');

        if (like) like.onclick = () => alert('Лайк! (тільки UI — сервісні дії в розробці)');
        if (dislike) dislike.onclick = () => alert('Дизлайк. (В розробці)');
        if (share) share.onclick = () => {
            // спробуємо Web Share API, якщо доступний
            const url = `https://youtu.be/${videoId}`;
            if (navigator.share) {
                navigator.share({ title: video?.snippet?.title || '', url }).catch(()=>{});
            } else {
                prompt('Скопіюйте посилання:', url);
            }
        };
        if (save) save.onclick = () => alert('Збережено в "Пізніше" (UI-симуляція)');
    }

    function closePlayer() {
        videoModal.classList.remove('open');
        videoModal.setAttribute('aria-hidden','true');
        videoFrame.innerHTML = '';
        playerInfo.innerHTML = '';
        document.body.style.overflow = '';
    }

    // Обробник вибору категорії
    function onCategorySelect(cat) {
        if (cat === 'Популярне') {
            loadPopularVideos();
            return;
        }
        // простий локальний фільтр по назві (демо)
        const q = cat === 'Усі' ? '' : cat;
        if (!q) {
            loadPopularVideos();
        } else {
            // пробуємо пошук по локальному набору або загальні пошуки
            searchInput.value = q;
            onSearch();
        }
    }

    /* ---------- Утиліти ---------- */
    function formatViewCount(views) {
        const n = parseInt(views || '0', 10);
        if (isNaN(n)) return '0';
        if (n >= 1_000_000) return (n / 1_000_000).toFixed(1) + 'M';
        if (n >= 1_000) return (n / 1_000).toFixed(1) + 'K';
        return n.toString();
    }
    function formatCount(c){ return formatViewCount(c); }

    function formatTimeAgo(publishedAt) {
        if (!publishedAt) return '';
        const p = new Date(publishedAt);
        const now = new Date();
        const diff = Math.floor((now - p) / (1000 * 60 * 60 * 24));
        if (diff < 1) return 'сьогодні';
        if (diff < 30) return `${diff} днів тому`;
        if (diff < 365) return `${Math.floor(diff / 30)} місяців тому`;
        return `${Math.floor(diff / 365)} років тому`;
    }

    function escapeHtml(str) {
        if (!str) return '';
        return String(str)
            .replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#039;');
    }
</script>
</body>
</html>
