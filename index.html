<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YutFurry - YouTube –∫–ª—ñ—î–Ω—Ç</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0f0f0f;
            color: #ffffff;
            line-height: 1.5;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
        }

        <!DOCTYPE html>

<html lang="uk">
<head>
    <meta charset="UTF-8">
    <!-- –í–∏–º–∫–Ω—É—Ç–∏ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è (pinch / double-tap zoom) –∑–∞ –∑–∞–ø–∏—Ç–æ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>YutFurry - YouTube –∫–ª—ñ—î–Ω—Ç (–∞–¥–∞–ø—Ç–æ–≤–∞–Ω–æ)</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body {
            height: 100%;
            -webkit-text-size-adjust: 100%;
            touch-action: manipulation; /* –∑–Ω–∏–∂—É—î –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å –Ω–µ–±–∞–∂–∞–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è/–∂–µ—Å—Ç—ñ–≤ */
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0f0f0f;
            color: #ffffff;
            line-height: 1.5;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
        }

```
    /* layout */
    .container { display: flex; min-height: 100vh; }

    /* Sidebar */
    .sidebar {
        width: 240px;
        background-color: #0f0f0f;
        padding: 12px;
        position: fixed;
        height: 100vh;
        overflow-y: auto;
        border-right: 1px solid #272727;
        transition: transform 0.25s ease;
        z-index: 30;
    }

    .logo { display:flex; align-items:center; padding: 0 12px; margin-bottom: 20px; }
    .logo-icon{
        background: linear-gradient(45deg, #ff0000, #ff6b6b);
        color:white; width:40px;height:40px;border-radius:8px;
        display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:18px;margin-right:12px;
    }
    .logo-text{
        font-size:20px;font-weight:bold;
        background:linear-gradient(45deg,#ff0000,#ff6b6b);
        -webkit-background-clip:text;-webkit-text-fill-color:transparent;
    }

    .nav-section { margin-bottom: 24px; }
    .nav-title { padding: 8px 24px; font-size:14px; color:#aaa; text-transform:uppercase; letter-spacing:0.5px; }
    .nav-item {
        display:flex; align-items:flex-start; gap:12px;
        padding: 10px 24px; border-radius:12px; cursor:pointer; transition: all .2s ease; margin-bottom:6px;
    }
    .nav-item:hover { background:#272727; }
    .nav-item.active { background:#272727; }
    .nav-icon { width:24px; height:24px; display:flex; align-items:center; justify-content:center; }

    /* main content */
    .main-content { flex:1; margin-left:240px; padding: 20px 16px 120px 16px; } /* bottom padding for mobile bottom nav */

    /* search */
    .top-search {
        display:none; /* shown on mobile */
        position:fixed;
        top:0; left:0; right:0;
        height:56px;
        background:#0f0f0f; border-bottom:1px solid #272727;
        z-index:40;
        display:flex; align-items:center; gap:12px; padding:8px 12px;
    }
    .top-search .logo-icon-small{ width:36px; height:36px; border-radius:6px; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:16px; }
    .search-container {
        display:flex; align-items:center; background:#272727; border-radius:24px; padding:8px 12px; max-width:720px; width:100%;
    }
    .search-input { flex:1; background:transparent; border:none; color:white; font-size:16px; padding:6px 8px; outline:none; }
    .search-button { background:#373737; border:none; color:white; padding:8px 12px; border-radius:20px; cursor:pointer; }

    /* categories */
    .categories { display:flex; gap:12px; margin:16px 0 20px 0; flex-wrap:nowrap; overflow-x:auto; padding-bottom:6px; }
    .category { background:#373737; padding:8px 14px; border-radius:20px; cursor:pointer; font-size:14px; white-space:nowrap; }
    .category.active { background:white; color:black; }

    /* video grid (desktop) */
    .video-grid {
        display:grid;
        grid-template-columns: repeat(auto-fill, minmax(320px,1fr));
        gap:20px;
        margin-bottom:40px;
    }
    .video-card {
        background:#1a1a1a; border-radius:12px; overflow:hidden; transition: transform .25s, box-shadow .25s; cursor:pointer;
    }
    .video-card:hover{ transform:translateY(-4px); box-shadow:0 8px 24px rgba(255,255,255,0.03); }
    .thumbnail { width:100%; height:180px; background:#373737; position:relative; overflow:hidden; }
    .thumbnail img{ width:100%; height:100%; object-fit:cover; display:block; }
    .duration { position:absolute; bottom:8px; right:8px; background:rgba(0,0,0,0.8); padding:2px 6px; border-radius:4px; font-size:12px; }

    .video-info { padding:12px; }
    .video-title { font-weight:600; margin-bottom:8px; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
    .channel-info { display:flex; align-items:center; margin-bottom:4px; gap:12px; }
    .channel-avatar { width:36px; height:36px; border-radius:50%; background:#373737; overflow:hidden; flex-shrink:0; }
    .channel-avatar img{ width:100%; height:100%; object-fit:cover; }
    .channel-name{ color:#aaa; font-size:14px; }
    .video-stats{ color:#aaa; font-size:14px; margin-left:48px; }

    /* modal */
    .video-modal {
        position:fixed; top:0; left:0; right:0; bottom:0;
        background:rgba(0,0,0,0.9); display:none; align-items:center; justify-content:center; z-index:1000; padding:16px;
    }
    .video-modal.active{ display:flex; }
    .video-player-container { width:100%; max-width:1100px; background:#1a1a1a; border-radius:12px; overflow:hidden; position:relative; }
    .close-button { position:absolute; top:12px; right:12px; background:rgba(0,0,0,0.7); border:none; color:white; width:40px; height:40px; border-radius:50%; cursor:pointer; z-index:10; font-size:20px; display:flex; align-items:center; justify-content:center; }
    .video-player { width:100%; height:0; padding-bottom:56.25%; position:relative; }
    .video-player iframe{ position:absolute; top:0; left:0; width:100%; height:100%; border:0; }
    .player-info { padding:16px; }
    .player-title{ font-size:18px; font-weight:600; margin-bottom:8px; }
    .player-stats{ display:flex; justify-content:space-between; color:#aaa; font-size:13px; margin-bottom:12px; }
    .player-actions{ display:flex; gap:12px; margin-bottom:12px; flex-wrap:wrap; }
    .action-button{ background:#373737; border:none; color:white; padding:8px 12px; border-radius:20px; cursor:pointer; display:flex; align-items:center; gap:8px; }

    .player-description{ background:#272727; padding:12px; border-radius:8px; font-size:14px; line-height:1.4; }

    .loading { text-align:center; padding:40px; color:#aaa; }

    /* ------------ MOBILE SPECIFIC ------------ */
    @media (max-width: 900px) {
        /* make sidebar compact */
        .sidebar { width:72px; }
        .main-content { margin-left:72px; padding-top:76px; padding-bottom:120px; } /* top padding for mobile top search */
        .nav-title, .nav-text { display:none; }
        .nav-item { justify-content:center; padding:12px; }
        .nav-icon { margin-right:0; }
    }

    @media (max-width: 768px) {
        /* hide sidebar fully (like mobile app that uses top/bottom nav) */
        .sidebar { transform: translateX(-110%); position:fixed; left:0; top:0; bottom:0; z-index:30; }
        .main-content { margin-left:0; padding-top:70px; padding-left:8px; padding-right:8px; } /* –∑–º–µ–Ω—à–µ–Ω–æ padding –¥–ª—è —â—ñ–ª—å–Ω—ñ—à–æ–≥–æ –≤–∏–≥–ª—è–¥—É */

        /* show mobile top search bar */
        .top-search { display:flex; }

        /* video list like YouTube mobile */
        .video-grid {
            display:flex;
            flex-direction:column;
            gap:8px; /* –∑–º–µ–Ω—à–µ–Ω–æ –≤—ñ–¥—Å—Ç—É–ø –º—ñ–∂ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ */
            margin-bottom:80px;
        }
        .video-card {
            display:flex;
            gap:8px; /* –∑–º–µ–Ω—à–µ–Ω–æ –≤—ñ–¥—Å—Ç—É–ø –º—ñ–∂ thumbnail —Ç–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é */
            align-items:flex-start;
            border-radius:10px;
            background:transparent;
            padding:6px 0;
        }
        .thumbnail { width:46%; height:120px; border-radius:8px; flex-shrink:0; } /* —Ç—Ä–æ—Ö–∏ —à–∏—Ä—à–µ –¥–ª—è –∫—Ä–∞—â–æ–≥–æ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –µ–∫—Ä–∞–Ω—É */
        .video-info { padding:0 4px; width:54%; } /* –∑–º–µ–Ω—à–µ–Ω–æ –ø–∞–¥–¥—ñ–Ω–≥ —ñ —à–∏—Ä–∏–Ω–∞ –ø—ñ–¥ –∫–æ–Ω—Ç–µ–Ω—Ç */
        .video-title { font-size:15px; display:-webkit-box; -webkit-line-clamp:2; margin-bottom:6px; }
        .channel-info { margin-top:6px; gap:8px; }
        .channel-name{ font-size:13px; color:#bbb; }
        .video-stats{ font-size:12px; color:#888; margin-left:0; }

        /* adjust modal to be full screen and remove extra margins */
        .video-player-container { border-radius:0; height:100vh; max-width:100%; display:flex; flex-direction:column; }
        .video-player { padding-bottom:56.25%; height:auto; }
        .player-info { overflow:auto; max-height:40vh; padding:12px; }

        /* bottom nav */
        .bottom-nav {
            position:fixed; left:0; right:0; bottom:0; height:56px; background:#0f0f0f; border-top:1px solid #272727; display:flex; z-index:50;
            justify-content:space-around; align-items:center; gap:6px;
        }
        .bottom-nav .nav-item-mobile { display:flex; flex-direction:column; align-items:center; justify-content:center; color:#bbb; font-size:11px; gap:4px; text-decoration:none; }
        .bottom-nav .nav-item-mobile.active { color:white; }
    }

    /* very small screens */
    @media (max-width: 420px) {
        .thumbnail { height:110px; }
        .video-card { gap:8px; }
        .player-title { font-size:16px; }
        .search-input { font-size:15px; }
    }

    /* Accessibility: ensure controls are tappable */
    .search-button, .action-button, .close-button {
        -webkit-tap-highlight-color: rgba(255,255,255,0.05);
        touch-action: manipulation;
    }
</style>
```

</head>
<body>
    <!-- Mobile top bar (visible on small screens) -->
    <div class="top-search" id="topSearchBar" style="display:none;">
        <div class="logo-icon-small" style="background:linear-gradient(45deg,#ff0000,#ff6b6b);">
            YF
        </div>
        <div style="flex:1;">
            <div class="search-container" style="width:100%;">
                <input type="text" class="search-input" placeholder="–ü–æ—à—É–∫ –≤—ñ–¥–µ–æ..." id="searchInputMobile" aria-label="–ü–æ—à—É–∫ –≤—ñ–¥–µ–æ">
                <button class="search-button" id="searchButtonMobile">–ü–æ—à—É–∫</button>
            </div>
        </div>
        <div style="width:36px; text-align:center; color:#bbb;">‚ò∞</div>
    </div>

```
<div class="container">
    <!-- Sidebar Navigation -->
    <div class="sidebar" id="sidebar">
        <div class="logo">
            <div class="logo-icon">YF</div>
            <div class="logo-text">YutFurry</div>
        </div>

        <div class="nav-section">
            <div class="nav-item active">
                <div class="nav-icon">üè†</div>
                <div class="nav-text">–ì–æ–ª–æ–≤–Ω–∞</div>
            </div>
            <div class="nav-item">
                <div class="nav-icon">üî•</div>
                <div class="nav-text">–¢—Ä–µ–Ω–¥–∏(–í —Ä–æ–∑—Ä–æ–±—Ü—ñ)</div>
            </div>
            <div class="nav-item">
                <div class="nav-icon">üì∫</div>
                <div class="nav-text">–ü—ñ–¥–ø–∏—Å–∫–∏(–í —Ä–æ–∑—Ä–æ–±—Ü—ñ)</div>
            </div>
        </div>

        <div class="nav-section">
            <div class="nav-title">–ù–ê–í–Ü–ì–ê–¶–Ü–Ø(–ù–µ –¥–æ—Å—Ç—É–ø–Ω–æ)</div>
            <div class="nav-item">
                <div class="nav-icon">üéµ</div>
                <div class="nav-text">–ú—É–∑–∏–∫–∞</div>
            </div>
            <div class="nav-item">
                <div class="nav-icon">üéÆ</div>
                <div class="nav-text">–Ü–≥—Ä–∏</div>
            </div>
            <div class="nav-item">
                <div class="nav-icon">‚öΩ</div>
                <div class="nav-text">–°–ø–æ—Ä—Ç</div>
            </div>
        </div>

        <div class="nav-section">
            <div class="nav-title">–ü–†–û –¢–í–û–†–¶–Ø</div>
            <div class="nav-item">
                <div class="nav-icon">üë§</div>
                <div class="nav-text">–ê—Ä—Ç–µ–º –ü—Ä–æ—Ü–∫–æ –ê–Ω–¥—Ä—ñ–π–æ–≤–∏—á ‚Äî –º–æ–ª–æ–¥–∏–π —Ä–æ–∑—Ä–æ–±–Ω–∏–∫ —ñ —Ç–≤–æ—Ä–µ—Ü—å –ø—Ä–æ—î–∫—Ç—É YouFurry, —è–∫–∏–π —î –∞–Ω–∞–ª–æ–≥–æ–º YouTube, –∞–ª–µ –∑ –≤–ª–∞—Å–Ω–∏–º —Å—Ç–∏–ª–µ–º, –¥–∏–∑–∞–π–Ω–æ–º —ñ —Å—É—á–∞—Å–Ω–∏–º–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—è–º–∏.</div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Desktop search (kept for larger screens) -->
        <div class="search-container" style="max-width:720px; display:flex; margin-bottom:12px;">
            <input type="text" class="search-input" placeholder="–ü–æ—à—É–∫ –≤—ñ–¥–µ–æ..." id="searchInput" aria-label="–ü–æ—à—É–∫ –≤—ñ–¥–µ–æ">
            <button class="search-button" id="searchButton">–ü–æ—à—É–∫</button>
        </div>

        <!-- Categories -->
        <div class="categories" id="categories">
            <div class="category active">–£—Å—ñ</div>
            <div class="category">–ü–æ–ø—É–ª—è—Ä–Ω–µ</div>
            <div class="category">–ú—É–∑–∏–∫–∞</div>
            <div class="category">–Ü–≥—Ä–∏</div>
            <div class="category">–§—ñ–ª—å–º–∏</div>
            <div class="category">–ñ–∏–≤—ñ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó</div>
            <div class="category">–ù–∞–≤—á–∞–Ω–Ω—è</div>
        </div>

        <!-- Video Grid -->
        <div class="video-grid" id="videoGrid">
            <div class="loading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö –≤—ñ–¥–µ–æ...</div>
        </div>
    </div>

    <!-- Video Player Modal -->
    <div class="video-modal" id="videoModal">
        <div class="video-player-container" role="dialog" aria-modal="true">
            <button class="close-button" id="closeButton">‚úï</button>
            <div class="video-player" id="videoPlayer">
                <!-- iframe -->
            </div>
            <div class="player-info" id="playerInfo">
                <!-- info -->
            </div>
        </div>
    </div>
</div>

<!-- Bottom navigation for mobile -->
<nav class="bottom-nav" id="bottomNav" style="display:none;">
    <a class="nav-item-mobile active" href="#" id="navHome"><div>üè†</div><div>–ì–æ–ª–æ–≤–Ω–∞</div></a>
    <a class="nav-item-mobile" href="#" id="navTrending"><div>üî•</div><div>–¢—Ä–µ–Ω–¥–∏</div></a>
    <a class="nav-item-mobile" href="#" id="navSubscriptions"><div>üì∫</div><div>–ü—ñ–¥–ø–∏—Å–∫–∏</div></a>
    <a class="nav-item-mobile" href="#" id="navLibrary"><div>üìÅ</div><div>–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞</div></a>
    <a class="nav-item-mobile" href="#" id="navProfile"><div>üë§</div><div>–ö–∞–±—ñ–Ω–µ—Ç</div></a>
</nav>

<script>
    // YouTube API configuration (–∑–∞–ª–∏—à–∏–≤ —è–∫ –±—É–ª–æ)
    const API_KEY = 'AIzaSyBVqXcayVNDN63l4WpH2HOrTfAqzh3DTXo';
    let currentVideos = [];

    // Elements
    const searchInput = document.getElementById('searchInput');
    const searchButton = document.getElementById('searchButton');
    const videoGrid = document.getElementById('videoGrid');
    const videoModal = document.getElementById('videoModal');
    const videoPlayer = document.getElementById('videoPlayer');
    const playerInfo = document.getElementById('playerInfo');
    const closeButton = document.getElementById('closeButton');

    // Mobile-specific elements
    const topSearchBar = document.getElementById('topSearchBar');
    const searchInputMobile = document.getElementById('searchInputMobile');
    const searchButtonMobile = document.getElementById('searchButtonMobile');
    const bottomNav = document.getElementById('bottomNav');

    // Sample videos kept as fallback (–Ω–µ –∑–º—ñ–Ω–∏–≤)
    const sampleVideos = [
        {
            id: { videoId: 'dQw4w9WgXcQ' },
            snippet: {
                title: 'Never Gonna Give You Up - Rick Astley',
                description: 'Official video for Rick Astley - Never Gonna Give You Up',
                channelTitle: 'Rick Astley',
                publishedAt: '2009-10-25T06:57:33Z',
                thumbnails: {
                    medium: { url: 'https://img.youtube.com/vi/dQw4w9WgXcQ/mqdefault.jpg' }
                }
            },
            statistics: {
                viewCount: '1500000000',
                likeCount: '12000000'
            }
        },
        {
            id: { videoId: 'kJQP7kiw5Fk' },
            snippet: {
                title: 'Despacito ft. Daddy Yankee',
                description: 'Luis Fonsi - Despacito ft. Daddy Yankee',
                channelTitle: 'Luis Fonsi',
                publishedAt: '2017-01-13T04:59:31Z',
                thumbnails: {
                    medium: { url: 'https://img.youtube.com/vi/kJQP7kiw5Fk/mqdefault.jpg' }
                }
            },
            statistics: {
                viewCount: '8000000000',
                likeCount: '50000000'
            }
        },
        {
            id: { videoId: '9bZkp7q19f0' },
            snippet: {
                title: 'PSY - GANGNAM STYLE',
                description: 'PSY - GANGNAM STYLE M/V',
                channelTitle: 'officialpsy',
                publishedAt: '2012-07-15T07:46:32Z',
                thumbnails: {
                    medium: { url: 'https://img.youtube.com/vi/9bZkp7q19f0/mqdefault.jpg' }
                }
            },
            statistics: {
                viewCount: '4500000000',
                likeCount: '23000000'
            }
        }
    ];

    // Init
    document.addEventListener('DOMContentLoaded', function() {
        // show/hide mobile UI based on screen width
        handleResponsiveUI();
        window.addEventListener('resize', handleResponsiveUI);

        // Load popular videos
        loadPopularVideos();

        // Event listeners
        searchButton.addEventListener('click', handleSearch);
        searchInput.addEventListener('keypress', function(e){ if (e.key === 'Enter') handleSearch(); });

        // mobile search
        if (searchButtonMobile) {
            searchButtonMobile.addEventListener('click', function(){
                const q = (searchInputMobile.value || '').trim();
                if (!q) return;
                searchInput.value = q; // mirror to desktop input for logic reuse
                handleSearch();
            });
            searchInputMobile.addEventListener('keypress', function(e){ if (e.key==='Enter') searchButtonMobile.click(); });
        }

        closeButton.addEventListener('click', closeVideoPlayer);

        document.querySelectorAll('.category').forEach(category => {
            category.addEventListener('click', function(){
                document.querySelectorAll('.category').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                handleCategoryClick(this.textContent);
            });
        });

        // bottom nav clicks (just visual)
        document.querySelectorAll('.bottom-nav .nav-item-mobile').forEach(item => {
            item.addEventListener('click', function(e){
                e.preventDefault();
                document.querySelectorAll('.bottom-nav .nav-item-mobile').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
            });
        });
    });

    function handleResponsiveUI(){
        const w = window.innerWidth;
        if (w <= 768) {
            // show mobile top search and bottom nav
            topSearchBar.style.display = 'flex';
            bottomNav.style.display = 'flex';
            document.getElementById('mainContent').style.paddingTop = '76px';
        } else {
            topSearchBar.style.display = 'none';
            bottomNav.style.display = 'none';
            document.getElementById('mainContent').style.paddingTop = '20px';
        }
    }

    // Search function (–∑–±–µ—Ä–µ–∂–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞, —Ç—Ä–æ—Ö–∏ –∞–¥–∞–ø—Ç–æ–≤–∞–Ω–∞)
    async function handleSearch() {
        const query = (searchInput.value || '').trim();
        if (!query) return;

        videoGrid.innerHTML = '<div class="loading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>';

        try {
            const response = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=12&q=${encodeURIComponent(query)}&type=video&key=${API_KEY}`);
            const data = await response.json();

            if (data.items && data.items.length > 0) {
                const videoIds = data.items.map(item => item.id.videoId).join(',');
                const statsResponse = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=statistics&id=${videoIds}&key=${API_KEY}`);
                const statsData = await statsResponse.json();

                const videosWithStats = data.items.map((item, index) => ({
                    ...item,
                    statistics: statsData.items[index]?.statistics || { viewCount:'0', likeCount:'0' }
                }));

                displayVideos(videosWithStats);
            } else {
                const filteredVideos = sampleVideos.filter(video =>
                    video.snippet.title.toLowerCase().includes(query.toLowerCase())
                );
                if (filteredVideos.length > 0) displayVideos(filteredVideos);
                else videoGrid.innerHTML = '<div class="loading">–í—ñ–¥–µ–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω—à–∏–π –∑–∞–ø–∏—Ç.</div>';
            }
        } catch (error) {
            console.error('Search error:', error);
            const filteredVideos = sampleVideos.filter(video =>
                video.snippet.title.toLowerCase().includes(query.toLowerCase())
            );
            if (filteredVideos.length > 0) displayVideos(filteredVideos);
            else videoGrid.innerHTML = '<div class="loading">–ü–æ–º–∏–ª–∫–∞ –ø–æ—à—É–∫—É. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.</div>';
        }
    }

    // Load popular (–ª–æ–≥—ñ–∫–∞ —Ç–∞–∫–∏–π —Å–∞–º–∏–π)
    async function loadPopularVideos() {
        videoGrid.innerHTML = '<div class="loading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö –≤—ñ–¥–µ–æ...</div>';
        try {
            const response = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&chart=mostPopular&maxResults=12&regionCode=UA&key=${API_KEY}`);
            const data = await response.json();
            if (data.items && data.items.length > 0) {
                const popularVideos = data.items.map(item => ({
                    id: { videoId: item.id },
                    snippet: item.snippet,
                    statistics: item.statistics
                }));
                displayVideos(popularVideos);
            } else {
                displayVideos(sampleVideos);
            }
        } catch (error) {
            console.error('Error loading popular videos:', error);
            displayVideos(sampleVideos);
        }
    }

    function handleCategoryClick(category) {
        videoGrid.innerHTML = '<div class="loading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>';
        if (category === '–ü–æ–ø—É–ª—è—Ä–Ω–µ') {
            loadPopularVideos(); return;
        }
        setTimeout(() => {
            let filteredVideos = [...sampleVideos];
            if (category !== '–£—Å—ñ') {
                filteredVideos = filteredVideos.filter(video =>
                    video.snippet.title.toLowerCase().includes(category.toLowerCase())
                );
            }
            displayVideos(filteredVideos);
        }, 300);
    }

    function displayVideos(videos) {
        currentVideos = videos;
        if (videos.length === 0) {
            videoGrid.innerHTML = '<div class="loading">–í—ñ–¥–µ–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</div>'; return;
        }

        // Different markup for mobile (list) vs desktop grid is handled by CSS only:
        videoGrid.innerHTML = videos.map(video => `
            <div class="video-card" onclick="openVideoPlayer('${video.id.videoId}')">
                <div class="thumbnail">
                    <img src="${video.snippet.thumbnails?.medium?.url || 'https://via.placeholder.com/320x180/333333/ffffff?text=Thumbnail'}" alt="${escapeHtml(video.snippet.title)}" onerror="this.src='https://via.placeholder.com/320x180/333333/ffffff?text=Thumbnail'">
                    <div class="duration">5:30</div>
                </div>
                <div class="video-info">
                    <div class="video-title">${escapeHtml(video.snippet.title)}</div>
                    <div class="channel-info">
                        <div class="channel-avatar">
                            <img src="https://via.placeholder.com/36/373737/ffffff?text=${encodeURIComponent(video.snippet.channelTitle.charAt(0) || 'C')}" alt="${escapeHtml(video.snippet.channelTitle)}">
                        </div>
                        <div style="display:flex;flex-direction:column;">
                            <div class="channel-name">${escapeHtml(video.snippet.channelTitle)}</div>
                            <div class="video-stats">${formatViewCount(video.statistics?.viewCount || '0')} –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤ ‚Ä¢ ${formatTimeAgo(video.snippet.publishedAt)}</div>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');

        // prevent anchor default behavior
        document.querySelectorAll('.video-card').forEach(card => {
            card.addEventListener('click', function(e){
                e.preventDefault();
                e.stopPropagation();
            });
        });
    }

    // Open video in modal
    function openVideoPlayer(videoId) {
        try {
            event.preventDefault();
            event.stopPropagation();
        } catch(e){}

        videoPlayer.innerHTML = '';
        playerInfo.innerHTML = '';

        const video = currentVideos.find(v => v.id.videoId === videoId);
        if (!video) return;

        const iframe = document.createElement('iframe');
        // autoplay enabled; modestbranding and rel to reduce related suggestions
        iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1`;
        iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
        iframe.allowFullscreen = true;
        iframe.setAttribute('frameborder', '0');
        iframe.style.width = '100%';
        iframe.style.height = '100%';
        videoPlayer.appendChild(iframe);

        playerInfo.innerHTML = `
            <div class="player-title">${escapeHtml(video.snippet.title)}</div>
            <div class="player-stats">
                <span>${formatViewCount(video.statistics?.viewCount || '0')} –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤</span>
                <span>${formatTimeAgo(video.snippet.publishedAt)}</span>
            </div>
            <div class="player-actions">
                <button class="action-button">üëç ${formatCount(video.statistics?.likeCount || '0')}</button>
                <button class="action-button">üëé –ù–µ –ø–æ–¥–æ–±–∞—î—Ç—å—Å—è (–í –†–æ–∑—Ä–æ–±—Ü—ñ)</button>
                <button class="action-button">üì§ –ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è (–í –†–æ–∑—Ä–æ–±—Ü—ñ)</button>
                <button class="action-button">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ (–í –†–æ–∑—Ä–æ–±—Ü—ñ)</button>
            </div>
            <div class="player-description">
                <strong>${escapeHtml(video.snippet.channelTitle)}</strong><br>
                ${escapeHtml(video.snippet.description || '')}
            </div>
        `;

        videoModal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    function closeVideoPlayer() {
        videoModal.classList.remove('active');
        document.body.style.overflow = 'auto';
        videoPlayer.innerHTML = '';
    }

    // Close modal clicking outside
    videoModal.addEventListener('click', function(e){
        if (e.target === videoModal) closeVideoPlayer();
    });

    // helpers
    function formatViewCount(views) {
        const count = parseInt(views || '0', 10);
        if (isNaN(count)) return '0';
        if (count >= 1000000) return (count/1000000).toFixed(1) + 'M';
        if (count >= 1000) return (count/1000).toFixed(1) + 'K';
        return count.toString();
    }
    function formatCount(count){ return formatViewCount(count); }

    function formatTimeAgo(publishedAt) {
        if (!publishedAt) return '';
        const published = new Date(publishedAt);
        const now = new Date();
        const diffTime = Math.abs(now - published);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        if (diffDays < 30) return `${diffDays} –¥–Ω—ñ–≤ —Ç–æ–º—É`;
        if (diffDays < 365) return `${Math.floor(diffDays/30)} –º—ñ—Å—è—Ü—ñ–≤ —Ç–æ–º—É`;
        return `${Math.floor(diffDays/365)} —Ä–æ–∫—ñ–≤ —Ç–æ–º—É`;
    }

    // simple html escape to avoid breaking markup with titles/descriptions
    function escapeHtml(str) {
        if (!str) return '';
        return String(str)
            .replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#039;');
    }
</script>
</body>
</html>
